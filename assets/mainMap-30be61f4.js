import{g as nt,a8 as ee,ar as j,aa as D,a9 as Pe,as as q,at as te,au as at,d as M,av as lt,y as d,aw as H,ax as K,ap as ne,ay as ot,az as st,aA as it,aB as ct,aC as rt,ab as Be,D as Re,r as B,aq as ut,aD as dt,c as N,aE as X,ae as Ee,C as ft,aF as gt,w as be,n as Q,o as re,ak as Ae,aG as Se,aH as ht,an as se,x as pe,J as ie,aI as vt,aJ as mt,aK as _t,aL as bt,aM as pt,ai as yt,$ as kt,a3 as wt,aN as Ct,aO as xt,aP as St,aQ as $e,f as $,h as V,m as h,u as g,H as F,l as $t,B as It,_ as ae,q as Z,K as De,L as he,M as ve,F as O,I as G,z as me,aR as Vt,A,E as ce,N as Me,j as oe,aS as Lt,R as _e,P as Tt,Q as Pt,aT as Bt,k as Rt,p as Et}from"./index-09662e76.js";import{_ as At}from"./ContactButton-6f13f6b1.js";import{_ as Dt}from"./Map.vue_vue_type_script_setup_true_lang-fd520367.js";import{u as Mt}from"./index-c2e46c99.js";let zt=0;function ze(){const e=nt(),{name:a="unknown"}=(e==null?void 0:e.type)||{};return`${a}-${++zt}`}const[Ht,Y]=ee("cell"),He={tag:j("div"),icon:String,size:String,title:D,value:D,label:D,center:Boolean,isLink:Boolean,border:Pe,required:Boolean,iconPrefix:String,valueClass:q,labelClass:q,titleClass:q,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Ft=te({},He,at);var Nt=M({name:Ht,props:Ft,setup(e,{slots:a}){const o=lt(),n=()=>{if(a.label||H(e.label))return d("div",{class:[Y("label"),e.labelClass]},[a.label?a.label():e.label])},l=()=>{var c;if(a.title||H(e.title)){const i=(c=a.title)==null?void 0:c.call(a);return Array.isArray(i)&&i.length===0?void 0:d("div",{class:[Y("title"),e.titleClass],style:e.titleStyle},[i||d("span",null,[e.title]),n()])}},s=()=>{const c=a.value||a.default;if(c||H(e.value))return d("div",{class:[Y("value"),e.valueClass]},[c?c():d("span",null,[e.value])])},r=()=>{if(a.icon)return a.icon();if(e.icon)return d(K,{name:e.icon,class:Y("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(a["right-icon"])return a["right-icon"]();if(e.isLink){const c=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return d(K,{name:c,class:Y("right-icon")},null)}};return()=>{var c;const{tag:i,size:u,center:C,border:y,isLink:p,required:k}=e,L=(c=e.clickable)!=null?c:p,b={center:C,required:k,clickable:L,borderless:!y};return u&&(b[u]=!!u),d(i,{class:Y(b),role:L?"button":void 0,tabindex:L?0:void 0,onClick:o},{default:()=>{var x;return[r(),l(),s(),f(),(x=a.extra)==null?void 0:x.call(a)]}})}}});const Ot=ne(Nt);function Fe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function jt(e,a){if(Fe(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function qt(e,a){return new Promise(o=>{const n=a.validator(e,a);if(it(n)){n.then(o);return}o(n)})}function Ie(e,a){const{message:o}=a;return ct(o)?o(e,a):o||""}function Wt({target:e}){e.composing=!0}function Ve({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Yt(e,a){const o=ot();e.style.height="auto";let n=e.scrollHeight;if(rt(a)){const{maxHeight:l,minHeight:s}=a;l!==void 0&&(n=Math.min(n,l)),s!==void 0&&(n=Math.max(n,s))}n&&(e.style.height=`${n}px`,st(o))}function Kt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function z(e){return[...e].length}function de(e,a){return[...e].slice(0,a).join("")}const[Ut,R]=ee("field"),ye={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:D,formatter:Function,clearIcon:j("clear"),modelValue:Be(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:j("focus"),formatTrigger:j("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Jt=te({},He,ye,{rows:D,type:j("text"),rules:Array,autosize:[Boolean,Object],labelWidth:D,labelClass:q,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Qt=M({name:Ut,props:Jt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:o}){const n=ze(),l=Re({status:"unvalidated",focused:!1,validateMessage:""}),s=B(),r=B(),f=B(),{parent:c}=ut(dt),i=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(H(e[t]))return e[t];if(c&&H(c.props[t]))return c.props[t]},C=N(()=>{const t=u("readonly");if(e.clearable&&!t){const _=i()!=="",v=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return _&&v}return!1}),y=N(()=>f.value&&o.input?f.value():e.modelValue),p=t=>t.reduce((_,v)=>_.then(()=>{if(l.status==="failed")return;let{value:w}=y;if(v.formatter&&(w=v.formatter(w,v)),!jt(w,v)){l.status="failed",l.validateMessage=Ie(w,v);return}if(v.validator)return Fe(w)&&v.validateEmpty===!1?void 0:qt(w,v).then(I=>{I&&typeof I=="string"?(l.status="failed",l.validateMessage=I):I===!1&&(l.status="failed",l.validateMessage=Ie(w,v))})}),Promise.resolve()),k=()=>{l.status="unvalidated",l.validateMessage=""},L=()=>a("endValidate",{status:l.status,message:l.validateMessage}),b=(t=e.rules)=>new Promise(_=>{k(),t?(a("startValidate"),p(t).then(()=>{l.status==="failed"?(_({name:e.name,message:l.validateMessage}),L()):(l.status="passed",_(),L())})):_()}),x=t=>{if(c&&e.rules){const{validateTrigger:_}=c.props,v=Se(_).includes(t),w=e.rules.filter(I=>I.trigger?Se(I.trigger).includes(t):v);w.length&&b(w)}},T=t=>{var _;const{maxlength:v}=e;if(H(v)&&z(t)>+v){const w=i();if(w&&z(w)===+v)return w;const I=(_=s.value)==null?void 0:_.selectionEnd;if(l.focused&&I){const P=[...t],E=P.length-+v;return P.splice(I-E,E),P.join("")}return de(t,+v)}return t},S=(t,_="onChange")=>{const v=t;t=T(t);const w=z(v)-z(t);if(e.type==="number"||e.type==="digit"){const P=e.type==="number";t=ht(t,P,P)}let I=0;if(e.formatter&&_===e.formatTrigger){const{formatter:P,maxlength:E}=e;if(t=P(t),H(E)&&z(t)>+E&&(t=de(t,+E)),s.value&&l.focused){const{selectionEnd:le}=s.value,xe=de(v,le);I=z(P(xe))-z(xe)}}if(s.value&&s.value.value!==t)if(l.focused){let{selectionStart:P,selectionEnd:E}=s.value;if(s.value.value=t,H(P)&&H(E)){const le=z(t);w?(P-=w,E-=w):I&&(P+=I,E+=I),s.value.setSelectionRange(Math.min(P,le),Math.min(E,le))}}else s.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},ue=t=>{t.target.composing||S(t.target.value)},m=()=>{var t;return(t=s.value)==null?void 0:t.blur()},U=()=>{var t;return(t=s.value)==null?void 0:t.focus()},W=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&Yt(t,e.autosize)},Ne=t=>{l.focused=!0,a("focus",t),Q(W),u("readonly")&&m()},Oe=t=>{l.focused=!1,S(i(),"onBlur"),a("blur",t),!u("readonly")&&(x("onBlur"),Q(W),vt())},ke=t=>a("clickInput",t),je=t=>a("clickLeftIcon",t),qe=t=>a("clickRightIcon",t),We=t=>{se(t),a("update:modelValue",""),a("clear",t)},we=N(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&l.status==="failed")return!0}),Ye=N(()=>{const t=u("labelWidth"),_=u("labelAlign");if(t&&_!=="top")return{width:X(t)}}),Ke=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&se(t),e.type==="search"&&m()),a("keypress",t)},Ce=()=>e.id||`${n}-input`,Ue=()=>l.status,Je=()=>{const t=R("control",[u("inputAlign"),{error:we.value,custom:!!o.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(o.input)return d("div",{class:t,onClick:ke},[o.input()]);const _={id:Ce(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${n}-label`:void 0,onBlur:Oe,onFocus:Ne,onInput:ue,onClick:ke,onChange:Ve,onKeypress:Ke,onCompositionend:Ve,onCompositionstart:Wt};return e.type==="textarea"?d("textarea",_,null):d("input",pe(Kt(e.type),_),null)},Qe=()=>{const t=o["left-icon"];if(e.leftIcon||t)return d("div",{class:R("left-icon"),onClick:je},[t?t():d(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ge=()=>{const t=o["right-icon"];if(e.rightIcon||t)return d("div",{class:R("right-icon"),onClick:qe},[t?t():d(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ze=()=>{if(e.showWordLimit&&e.maxlength){const t=z(i());return d("div",{class:R("word-limit")},[d("span",{class:R("word-num")},[t]),ie("/"),e.maxlength])}},Xe=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const _=o["error-message"],v=u("errorMessageAlign");return d("div",{class:R("error-message",v)},[_?_({message:t}):t])}},et=()=>{const t=u("labelWidth"),_=u("labelAlign"),v=u("colon")?":":"";if(o.label)return[o.label(),v];if(e.label)return d("label",{id:`${n}-label`,for:o.input?void 0:Ce(),onClick:w=>{se(w),U()},style:_==="top"&&t?{width:X(t)}:void 0},[e.label+v])},tt=()=>[d("div",{class:R("body")},[Je(),C.value&&d(K,{ref:r,name:e.clearIcon,class:R("clear")},null),Ge(),o.button&&d("div",{class:R("button")},[o.button()])]),Ze(),Xe()];return Ee({blur:m,focus:U,validate:b,formValue:y,resetValidation:k,getValidationStatus:Ue}),ft(gt,{customValue:f,resetValidation:k,validateWithTrigger:x}),be(()=>e.modelValue,()=>{S(i()),k(),x("onChange"),Q(W)}),re(()=>{S(i(),e.formatTrigger),Q(W)}),Ae("touchstart",We,{target:N(()=>{var t;return(t=r.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),_=u("labelAlign"),v=Qe(),w=()=>{const I=et();return _==="top"?[v,I].filter(Boolean):I||[]};return d(Ot,{size:e.size,class:R({error:we.value,disabled:t,[`label-${_}`]:_}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ye.value,valueClass:R("value"),titleClass:[R("label",[_,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:v&&_!=="top"?()=>v:null,title:w,value:tt,extra:o.extra})}}});const Gt=ne(Qt),[Zt,fe]=ee("switch"),Xt={size:D,loading:Boolean,disabled:Boolean,modelValue:q,activeColor:String,inactiveColor:String,activeValue:{type:q,default:!0},inactiveValue:{type:q,default:!1}};var en=M({name:Zt,props:Xt,emits:["change","update:modelValue"],setup(e,{emit:a,slots:o}){const n=()=>e.modelValue===e.activeValue,l=()=>{if(!e.disabled&&!e.loading){const r=n()?e.inactiveValue:e.activeValue;a("update:modelValue",r),a("change",r)}},s=()=>{if(e.loading){const r=n()?e.activeColor:e.inactiveColor;return d(_t,{class:fe("loading"),color:r},null)}if(o.node)return o.node()};return mt(()=>e.modelValue),()=>{var r;const{size:f,loading:c,disabled:i,activeColor:u,inactiveColor:C}=e,y=n(),p={fontSize:X(f),backgroundColor:y?u:C};return d("div",{role:"switch",class:fe({on:y,loading:c,disabled:i}),style:p,tabindex:i?void 0:0,"aria-checked":y,onClick:l},[d("div",{class:fe("node")},[s()]),(r=o.background)==null?void 0:r.call(o)])}}});const tn=ne(en),[nn,ge]=ee("back-top"),an={right:D,bottom:D,zIndex:D,target:[String,Object],offset:Be(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var ln=M({name:nn,inheritAttrs:!1,props:an,emits:["click"],setup(e,{emit:a,slots:o,attrs:n}){let l=!1;const s=B(!1),r=B(),f=B(),c=N(()=>te(bt(e.zIndex),{right:X(e.right),bottom:X(e.bottom)})),i=p=>{var k;a("click",p),(k=f.value)==null||k.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},u=()=>{s.value=f.value?Ct(f.value)>=+e.offset:!1},C=()=>{const{target:p}=e;if(typeof p=="string"){const k=document.querySelector(p);if(k)return k}else return p},y=()=>{xt&&Q(()=>{f.value=e.target?C():St(r.value),u()})};return Ae("scroll",pt(u,100),{target:f}),re(y),yt(()=>{l&&(s.value=!0,l=!1)}),kt(()=>{s.value&&e.teleport&&(s.value=!1,l=!0)}),be(()=>e.target,y),()=>{const p=d("div",pe({ref:e.teleport?void 0:r,class:ge({active:s.value}),style:c.value,onClick:i},n),[o.default?o.default():d(K,{name:"back-top",class:ge("icon")},null)]);return e.teleport?[d("div",{ref:r,class:ge("placeholder")},null),d(wt,{to:e.teleport},{default:()=>[p]})]:p}}});const on=ne(ln),[sn,J,cn]=ee("search"),rn=te({},ye,{label:String,shape:j("square"),leftIcon:j("search"),clearable:Pe,actionText:String,background:String,showAction:Boolean});var un=M({name:sn,props:rn,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:o,attrs:n}){const l=ze(),s=B(),r=()=>{o.action||(a("update:modelValue",""),a("cancel"))},f=m=>{m.keyCode===13&&(se(m),a("search",e.modelValue))},c=()=>e.id||`${l}-input`,i=()=>{if(o.label||e.label)return d("label",{class:J("label"),for:c()},[o.label?o.label():e.label])},u=()=>{if(e.showAction){const m=e.actionText||cn("cancel");return d("div",{class:J("action"),role:"button",tabindex:0,onClick:r},[o.action?o.action():m])}},C=()=>{var m;return(m=s.value)==null?void 0:m.blur()},y=()=>{var m;return(m=s.value)==null?void 0:m.focus()},p=m=>a("blur",m),k=m=>a("focus",m),L=m=>a("clear",m),b=m=>a("clickInput",m),x=m=>a("clickLeftIcon",m),T=m=>a("clickRightIcon",m),S=Object.keys(ye),ue=()=>{const m=te({},n,$e(e,S),{id:c()}),U=W=>a("update:modelValue",W);return d(Gt,pe({ref:s,type:"search",class:J("field"),border:!1,onBlur:p,onFocus:k,onClear:L,onKeypress:f,onClickInput:b,onClickLeftIcon:x,onClickRightIcon:T,"onUpdate:modelValue":U},m),$e(o,["left-icon","right-icon"]))};return Ee({focus:y,blur:C}),()=>{var m;return d("div",{class:J({"show-action":e.showAction}),style:{background:e.background}},[(m=o.left)==null?void 0:m.call(o),d("div",{class:J("content",e.shape)},[i(),ue()]),u()])}}});const dn=ne(un),fn={class:"popup-top"},gn=["src"],Le="overflow-hidden",hn=M({__name:"FloatingPanel",props:{maxHeight:{default:98},firstHeight:{default:50},minHeight:{default:8},isNeedTwo:{type:Boolean,default:!0}},emits:["change","handleScroll"],setup(e,{expose:a,emit:o}){const n=e;let l=0,s=0;const r=B(n.minHeight),f=B(null),c=B(0),i=B(!1),u=o,C=N(()=>({height:r.value==n.maxHeight?"calc(100% - 94px)":r.value+"%",overflowY:r.value>50?"auto":"hidden",borderRadius:r.value==n.maxHeight?"0":"20px 20px 0px 0px"})),y=T=>{i.value=!0,l=T.touches[0].clientY},p=T=>{if(c.value!==0)return;i.value=!1;const S=T.changedTouches[0].clientY-l;Math.abs(S)<5||(n.isNeedTwo?S<0?s==0?(s=1,r.value=n.firstHeight):(s=2,r.value=n.maxHeight):s==2&&S>20&&S<200?(s=1,r.value=n.firstHeight):(s==2&&S>200||s==1&&S>5)&&(s=0,r.value=n.minHeight):r.value=S<0?n.maxHeight:n.minHeight,l=0,u("change",r.value))},k=()=>{r.value=n.minHeight,c.value=0,s=0,u("change",r.value)},L=()=>{var T,S;c.value=(T=f.value)!=null&&T.scrollTop&&((S=f.value)==null?void 0:S.scrollTop)>0?f.value.scrollTop:0,u("handleScroll",c.value)};re(()=>{window.addEventListener("scroll",L,!0)});const b=()=>{document.body.classList.add(Le)},x=()=>{document.body.classList.remove(Le)};return be(i,T=>{T?b():x()}),a({hideDialog:k}),(T,S)=>($(),V("div",{ref_key:"popup",ref:f,class:"popup",style:It(g(C)),onTouchstart:y,onTouchend:p},[h("div",fn,[h("img",{src:g(F)(g(r)==n.maxHeight?"h5/icon-xh.png":"h5/icon-sh.png")},null,8,gn)]),S[0]||(S[0]=h("div",{class:"w-100% bg-[#ddd]",style:{height:"1px"}},null,-1)),$t(T.$slots,"default",{},void 0,!0)],36))}});const vn=ae(hn,[["__scopeId","data-v-06d5c172"]]);const mn=["src"],_n=M({__name:"search",props:{showResult:{type:Boolean,default:!1}},emits:["search","focus","clear"],setup(e,{emit:a}){const o=B(),n=a,l=()=>n("search",o.value),s=()=>{n("focus")},r=()=>{o.value=null,n("clear")};return(f,c)=>{const i=dn;return $(),V("div",null,[d(i,{class:"search",modelValue:g(o),"onUpdate:modelValue":[c[0]||(c[0]=u=>De(o)?o.value=u:null),l],placeholder:"请输入搜索关键词",onSearch:l,onFocus:s,onClear:r},{"left-icon":Z(()=>[h("img",{src:g(F)("h5/icon-search.png")},null,8,mn)]),"right-icon":Z(()=>[he(h("div",{class:"text",onClick:r},"取消",512),[[ve,f.showResult]])]),_:1},8,["modelValue"])])}}});const bn=ae(_n,[["__scopeId","data-v-5497c4c4"]]);const pn={class:"sht"},yn={class:"tool"},kn=["onClick"],wn=["src"],Cn={class:"location"},xn=["src"],Sn=["src"],$n=M({__name:"toolBar",props:{type:{}},setup(e){const a=e,o=B([{icon:"com/tool-vr.png",label:"全景",type:"vr"},{icon:"com/tool-2d.png",label:"2D",type:"setViewMode"}]),n=B(!0),l={resource:{center:[111.879582,28.895863],zoom:11},specialTrain:{center:[111.928793,28.789483],zoom:14.5}},s=r=>{switch(r){case"vr":ce("h5/vr");break;case"init":const f=a.type==="specialTrain"?a.type:"resource",c=l[f];Me(window.map,c.zoom,c.center);break;default:o.value[1].label=o.value[1].label==="2D"?"3D":"2D",window.map.setViewMode(o.value[1].label),o.value[1].label==="3D"&&window.map.setPitch(70);break}};return(r,f)=>{const c=tn;return $(),V(O,null,[h("div",pn,[d(c,{modelValue:g(n),"onUpdate:modelValue":f[0]||(f[0]=i=>De(n)?n.value=i:null),onClick:f[1]||(f[1]=i=>g(Vt)(g(n))),"active-color":"#029AA7","inactive-color":"#B2B2B2"},null,8,["modelValue"]),f[4]||(f[4]=h("span",{class:"mt-4px"},"手绘地图",-1))]),h("div",yn,[($(!0),V(O,null,G(g(o),i=>($(),V("div",{class:"list",key:i.icon},[h("div",{onClick:u=>s(i.type),class:"item"},[h("img",{src:g(F)(i.icon),"lazy-load":""},null,8,wn),ie(" "+A(i.label),1)],8,kn)]))),128))]),h("div",Cn,[h("img",{onClick:f[2]||(f[2]=me(i=>g(ce)("h5/index"),["stop"])),src:g(F)("h5/home.png")},null,8,xn),h("img",{onClick:f[3]||(f[3]=me(i=>s("init"),["stop"])),src:g(F)("h5/position.png")},null,8,Sn)])],64)}}});const In=ae($n,[["__scopeId","data-v-6f02cfd8"]]),Vn={class:"left"},Ln={key:0,class:"status"},Tn=["src"],Pn=["src"],Bn={class:"right"},Rn={class:"title ellipsi1"},En={class:"tag"},An={key:0},Dn={key:1},Mn={class:"text"},zn={class:"text"},Hn=M({__name:"infoList",props:{info:{}},setup(e){const a=e,o=N(()=>{var r;const l=(r=a.info)==null?void 0:r.img,s=Lt(l);return s==="2"?_e(l[1][0]):s==="1"?_e(l[0]):F("h5/editSrc.png")}),n=()=>{const l=`${a.info.type}/${a.info.id}/${a.info.name}详情`;ce("h5/detail",l)};return(l,s)=>{var r,f,c,i,u,C,y,p,k,L;return $(),V(O,null,[h("div",{class:"info-list",onClick:s[1]||(s[1]=b=>n())},[h("div",Vn,[(r=l.info)!=null&&r.status?($(),V("div",Ln,A((f=l.info)==null?void 0:f.status),1)):oe("",!0),h("img",{src:g(o),"lazy-load":""},null,8,Tn),(c=l.info)!=null&&c.link?($(),V("img",{key:1,onClick:s[0]||(s[0]=me(b=>g(ce)("webView",l.info.link,!0),["stop"])),class:"vr",src:g(F)("h5/icon-vr.png")},null,8,Pn)):oe("",!0)]),h("div",Bn,[h("div",Rn,A((i=l.info)==null?void 0:i.name),1),h("div",En,[(u=l.info)!=null&&u.typeLabel?($(),V("span",An,A((C=l.info)==null?void 0:C.typeLabel),1)):oe("",!0),(y=l.info)!=null&&y.approval?($(),V("span",Dn,A((p=l.info)==null?void 0:p.approval),1)):oe("",!0)]),h("p",Mn,"用地面积："+A((k=l.info)==null?void 0:k.area)+"亩",1),h("p",zn,"基准地价："+A((L=l.info)==null?void 0:L.price)+"/㎡",1)])]),s[2]||(s[2]=h("div",{class:"line"},null,-1))],64)}}});const Te=ae(Hn,[["__scopeId","data-v-bee3f375"]]),Fn={class:"w-screen h-screen overflow-hidden"},Nn={class:"tab"},On=["onClick"],jn={class:"box"},qn={class:"list"},Wn=["src"],Yn={class:"search-result"},Kn={class:"type"},Un=["onClick"],Jn={class:"font-extrabold text-#353535 flex items-center flex-1"},Qn=["src"],Gn={class:"go-there"},Zn=["src"],Xn={class:"py-20px px-30px box-border"},ea=M({__name:"mainMap",setup(e){const a=Tt(),o={specialTrain:[{label:"工业用地",type:"parkPlot"}],all:[{label:"商业项目",type:"business"},{label:"文旅投资",type:"travel"},{label:"产业招商",type:"industry"},{label:"矿权出让",type:"mining"},{label:"其他招商",type:"other"}]},n=Re({show:!0,detailPop:!1,showFooter:!0,searchResult:!1,searchList:[],detailInfo:null,tabActive:0,tab:[],markerList:"",markerDetail:"",type:""}),l=Mt(async i=>{if(i){const u=Pt(window.searchList,i);n.searchList=u.reduce((C,y)=>{const p=C.find(k=>k.label===y.typeLabel);return p?p.list.push(y):C.push({label:y.typeLabel,list:[y]}),C},[])}else n.searchList=[]},500),s=i=>{i.position&&Me(window.map,17,i.position),n.showResult=!1,n.searchList=[]},r=i=>{n.tabActive=i,n.markerList=window.data.marker[i]},f=i=>{n.showFooter=!1,n.detailPop=!0,n.markerDetail=i},c=()=>{n.detailPop=!1,n.showFooter=!0};return re(()=>{n.type=a.params.type,n.tab=o[n.type],r(n.tab[0].type)}),(i,u)=>{const C=Dt,y=on,p=vn,k=At,L=Bt;return $(),V("div",Fn,[d(bn,{"show-result":g(n).showResult,onSearch:g(l),onFocus:u[0]||(u[0]=b=>g(n).showResult=!0),onClear:u[1]||(u[1]=b=>g(n).showResult=!1)},null,8,["show-result","onSearch"]),h("div",Nn,[($(!0),V(O,null,G(g(n).tab,b=>($(),V("span",{class:Rt({active:g(n).tabActive===b.type}),onClick:x=>r(b.type),key:b.type},A(b.label),11,On))),128))]),d(In,{ref:"refToolBar",type:g(n).type},null,8,["type"]),d(C,{onMarkerHandel:f,marker:g(n).markerList,type:g(n).type},null,8,["marker","type"]),he(d(p,{class:"floating-panel","min-height":20,"max-height":90,"is-need-two":!1},{default:Z(()=>[h("div",jn,[h("div",qn,[($(!0),V(O,null,G(g(n).markerList,b=>($(),Et(Te,{key:b.id,info:b},null,8,["info"]))),128)),d(y,{target:".popup",right:"40px",bottom:"128px","z-index":"2002",style:{"background-color":"transparent"}},{default:Z(()=>[h("img",{class:"back-top",src:g(F)("h5/back-top.png")},null,8,Wn)]),_:1})])])]),_:1},512),[[ve,g(n).showFooter]]),he(h("div",Yn,[($(!0),V(O,null,G(g(n).searchList,b=>($(),V("div",{key:b.label,class:"result"},[h("div",Kn,A(b==null?void 0:b.label),1),u[3]||(u[3]=h("div",{class:"line",style:{width:"100%"}},null,-1)),($(!0),V(O,null,G(b==null?void 0:b.list,x=>($(),V("div",{class:"list",key:x.id},[h("div",{class:"flex justify-between",onClick:T=>s(x)},[h("div",Jn,[h("img",{src:g(_e)(x==null?void 0:x.icon)},null,8,Qn),ie(A(x==null?void 0:x.name),1)]),h("div",Gn,[h("img",{src:g(F)("h5/icon-dzq.png")},null,8,Zn),u[2]||(u[2]=ie("到这去 "))])],8,Un)]))),128))]))),128))],512),[[ve,g(n).showResult]]),d(L,{show:g(n).detailPop,closeable:"","close-icon":"close",round:"",position:"bottom",class:"detail-pop",onClickOverlay:c,onClickCloseIcon:c},{default:Z(()=>[h("div",Xn,[d(Te,{info:g(n).markerDetail},null,8,["info"]),d(k,{info:{...g(n).markerDetail,cla:"contact"}},null,8,["info"])])]),_:1},8,["show"])])}}});const oa=ae(ea,[["__scopeId","data-v-1c30381b"]]);export{oa as default};
