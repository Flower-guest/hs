import{a as Te,b as Ee,_ as Se}from"./PCWebView-b992159c.js";import{_ as de,a as it,c as ct,j as ge,d as Ie,r as Rt,L as ee,o as Le,h as T,k as Pt,u as K,F as Ct,i as Bt,w as Me,m as Fe,b as Ne,t as re,l as Oe}from"./index-acf64cca.js";import{T as Re}from"./topInfo-2241bc4d.js";import{g as at,b as $e}from"./index-d71ac70b.js";import"./index-d0b423d3.js";function $t(o){return o===""?o:o==="true"||o=="1"}function je(o,t){return new Promise((e,r)=>{var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var i=new FileReader;i.onloadend=function(){e(i.result)},i.readAsArrayBuffer(n.response)},n.open("GET",o),n.send()})}function nt(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function ne(o,t){for(var e="",r=0,n=-1,i=0,s,l=0;l<=o.length;++l){if(l<o.length)s=o.charCodeAt(l);else{if(s===47)break;s=47}if(s===47){if(!(n===l-1||i===1))if(n!==l-1&&i===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",r=0):(e=e.slice(0,a),r=e.length-1-e.lastIndexOf("/")),n=l,i=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=l,i=0;continue}}t&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+o.slice(n+1,l):e=o.slice(n+1,l),r=l-n-1;n=l,i=0}else s===46&&i!==-1?++i:i=-1}return e}function Ue(o,t){var e=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+r:e+o+r:r}var vt={resolve:function(){for(var t="",e=!1,r,n=arguments.length-1;n>=-1&&!e;n--){var i;n>=0?i=arguments[n]:(r===void 0&&(r=process.cwd()),i=r),nt(i),i.length!==0&&(t=i+"/"+t,e=i.charCodeAt(0)===47)}return t=ne(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(nt(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=ne(t,!e),t.length===0&&!e&&(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return nt(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];nt(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":vt.normalize(t)},relative:function(t,e){if(nt(t),nt(e),t===e||(t=vt.resolve(t),e=vt.resolve(e),t===e))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var n=t.length,i=n-r,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var l=e.length,a=l-s,c=i<a?i:a,f=-1,h=0;h<=c;++h){if(h===c){if(a>c){if(e.charCodeAt(s+h)===47)return e.slice(s+h+1);if(h===0)return e.slice(s+h)}else i>c&&(t.charCodeAt(r+h)===47?f=h:h===0&&(f=0));break}var v=t.charCodeAt(r+h),_=e.charCodeAt(s+h);if(v!==_)break;v===47&&(f=h)}var w="";for(h=r+f+1;h<=n;++h)(h===n||t.charCodeAt(h)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+e.slice(s+f):(s+=f,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(nt(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,n=-1,i=!0,s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),e===47){if(!i){n=s;break}}else i=!1;return n===-1?r?"/":".":r&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');nt(t);var r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var l=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){var c=t.charCodeAt(s);if(c===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),l>=0&&(c===e.charCodeAt(l)?--l===-1&&(n=s):(l=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)}},extname:function(t){nt(t);for(var e=-1,r=0,n=-1,i=!0,s=0,l=t.length-1;l>=0;--l){var a=t.charCodeAt(l);if(a===47){if(!i){r=l+1;break}continue}n===-1&&(i=!1,n=l+1),a===46?e===-1?e=l:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ue("/",t)},parse:function(t){nt(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r=t.charCodeAt(0),n=r===47,i;n?(e.root="/",i=1):i=0;for(var s=-1,l=0,a=-1,c=!0,f=t.length-1,h=0;f>=i;--f){if(r=t.charCodeAt(f),r===47){if(!c){l=f+1;break}continue}a===-1&&(c=!1,a=f+1),r===46?s===-1?s=f:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===l+1?a!==-1&&(l===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(l,a)):(l===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(l,s),e.base=t.slice(l,a)),e.ext=t.slice(s,a)),l>0?e.dir=t.slice(0,l-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};vt.posix=vt;const ze=vt.extname,pe=vt.basename;class Ge{constructor(){let t=(()=>typeof global>"u")(),e="image/png",r="image/jpeg",n="image/jpeg",i="image/webp",s="application/pdf",l="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:e,jpg:r,jpeg:n,webp:i}:{png:e,jpg:r,jpeg:n,pdf:s,svg:l},mimes:t?{[e]:"png",[r]:"jpg",[i]:"webp"}:{[e]:"png",[r]:"jpg",[s]:"pdf",[l]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function He(o,{filename:t="",extension:e="",format:D,page:n,quality:i,matte:s,density:l,outline:a,archive:_}={}){var{fromMime:f,toMime:h,expected:v}=new Ge,_=_||"canvas",w=D||e.replace(/@\d+x$/i,"")||ze(t),D=f(h(w)||w),U=h(D),g=o.length;if(!w)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!D)throw new Error(`Unsupported file format "${w}" (expected ${v})`);if(!g)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let p,k,d=t.replace(/{(\d*)}/g,(m,x)=>(k=!0,x=parseInt(x,10),p=isFinite(x)?x:isFinite(p)?p:-1,"{}")),y=n>0?n-1:n<0?g+n:void 0;if(isFinite(y)&&y<0||y>=g)throw new RangeError(g==1?`Canvas only has a ‘page 1’ (${y} is out of bounds)`:`Canvas has pages 1–${g} (${y} is out of bounds)`);if(o=isFinite(y)?[o[y]]:k||D=="pdf"?o:o.slice(-1),i===void 0)i=.92;else if(typeof i!="number"||!isFinite(i)||i<0||i>1)throw new TypeError("The quality option must be an number in the 0.0–1.0 range");if(l===void 0){let m=(e||pe(t,w)).match(/@(\d+)x$/i);l=m?parseInt(m[1],10):1}else if(typeof l!="number"||!Number.isInteger(l)||l<1)throw new TypeError("The density option must be a non-negative integer");return a===void 0?a=!0:D=="svg"&&(a=!!a),{filename:t,pattern:d,format:D,mime:U,pages:o,padding:p,quality:i,matte:s,density:l,outline:a,archive:_}}class It{static for(t){return new It().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var e=this.crc|0,r=this.table,n=0,i=t.length|0;n<i;n++)e=e>>>8^r[(e^t[n])&255];return this.crc=e,this}}It.prototype.table=(()=>{var o,t,e,r=[];for(o=0;o<256;o++){for(e=o,t=0;t<8;t++)e=e&1?e>>>1^3988292384:e>>>1;r[o]=e}return r})();function jt(o){let t=new Uint8Array(o),e=new DataView(t.buffer),r={array:t,view:e,size:o,set8(n,i){return e.setUint8(n,i),r},set16(n,i){return e.setUint16(n,i,!0),r},set32(n,i){return e.setUint32(n,i,!0),r},bytes(n,i){return t.set(i,n),r}};return r}class Lt{constructor(t){let e=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2,date:(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}),this.add(t)}async add(t,e){let r=!e,n=Lt.encoder.encode(`${this.directory}/${r?"":t}`),i=new Uint8Array(r?0:await e.arrayBuffer()),s=30+n.length,l=s+i.length,a=16,{offset:c}=this,f=jt(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,It.for(i)).set32(14,i.length).set32(18,i.length).set16(22,n.length);c+=s;let h=jt(s+i.length+a).set32(0,67324752).bytes(4,f.array).bytes(30,n).bytes(s,i);c+=i.length,h.set32(l,134695760).bytes(l+4,f.array.slice(10,22)),c+=a,this.files.push({offset:c,folder:r,name:n,header:f,payload:h}),this.offset=c}toBuffer(){let t=this.files.reduce((h,{name:v})=>46+v.length+h,0),e=jt(t+22),r=0;for(var{offset:n,name:i,header:s,folder:l}of this.files)e.set32(r,33639248).set16(r+4,20).bytes(r+6,s.array).set8(r+38,l?16:0).set32(r+42,n).bytes(r+46,i),r+=46+i.length;e.set32(r,101010256).set16(r+8,this.files.length).set16(r+10,this.files.length).set32(r+12,t).set32(r+16,this.offset);let a=new Uint8Array(this.offset+e.size),c=0;for(var{payload:f}of this.files)a.set(f.array,c),c+=f.size;return a.set(e.array,c),a}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Lt.encoder=new TextEncoder;const Xt=(o,t,e,r)=>{if(r){let{width:n,height:i}=o,s=Object.assign(document.createElement("canvas"),{width:n,height:i}),l=s.getContext("2d");l.fillStyle=r,l.fillRect(0,0,n,i),l.drawImage(o,0,0),o=s}return new Promise((n,i)=>o.toBlob(n,t,e))},Ke=(...o)=>Xt(...o).then(t=>t.arrayBuffer()),Xe=async(o,t,e,r,n)=>{me(n,await Xt(o,t,e,r))},Ze=async(o,t,e,r,n,i,s)=>{let l=f=>i.replace("{}",String(f+1).padStart(s,"0")),a=pe(n,".zip")||"archive",c=new Lt(a);await Promise.all(o.map(async(f,h)=>{let v=l(h);await c.add(v,await Xt(f,t,e,r))})),me(`${a}.zip`,c.blob)},me=(o,t)=>{const e=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=e,r.setAttribute("download",o),typeof r.download>"u"&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>window.URL.revokeObjectURL(e),100)},Ve=(o,t,e)=>o.map(r=>{if(t==1&&!e)return r.canvas;let n=document.createElement("canvas"),i=n.getContext("2d"),s=r.canvas?r.canvas:r;return n.width=s.width*t,n.height=s.height*t,e&&(i.fillStyle=e,i.fillRect(0,0,n.width,n.height)),i.scale(t,t),i.drawImage(s,0,0),n}),qe={asBuffer:Ke,asDownload:Xe,asZipDownload:Ze,atScale:Ve,options:He},{asBuffer:Ut,asDownload:Je,asZipDownload:We,atScale:zt,options:Gt}=qe,ie=Symbol.for("toDataURL"),Ye=o=>new Promise((t,e)=>Object.assign(new ve,{crossOrigin:"Anonymous",onload:t,onerror:e,src:o}));let Qe=class{constructor(t,e){let r=document.createElement("canvas"),n=[];Object.defineProperty(r,"async",{value:!0,writable:!1,enumerable:!0});for(var[i,s]of Object.entries({png:()=>Ut(r,"image/png"),jpg:()=>Ut(r,"image/jpeg"),pages:()=>n.concat(r).map(l=>l.getContext("2d"))}))Object.defineProperty(r,i,{get:s});return Object.assign(r,{width:t,height:e,newPage(...l){var{width:c,height:f}=r,a=Object.assign(document.createElement("canvas"),{width:c,height:f});a.getContext("2d").drawImage(r,0,0),n.push(a);var[c,f]=l.length?l:[c,f];return Object.assign(r,{width:c,height:f}).getContext("2d")},saveAs(l,a){a=typeof a=="number"?{quality:a}:a;let c=Gt(this.pages,{filename:l,...a}),{pattern:f,padding:h,mime:v,quality:_,matte:w,density:D,archive:U}=c,g=zt(c.pages,D);return h==null?Je(g[0],v,_,w,l):We(g,v,_,w,U,f,h)},toBuffer(l="png",a={}){a=typeof a=="number"?{quality:a}:a;let c=Gt(this.pages,{extension:l,...a}),{mime:f,quality:h,matte:v,pages:_,density:w}=c,D=zt(_,w,v)[0];return Ut(D,f,h,v)},[ie]:r.toDataURL.bind(r),toDataURL(l="png",a={}){a=typeof a=="number"?{quality:a}:a;let c=Gt(this.pages,{extension:l,...a}),{mime:f,quality:h,matte:v,pages:_,density:w}=c,D=zt(_,w,v)[0],U=D[D===r?ie:"toDataURL"](f,h);return Promise.resolve(U)}})}};const{CanvasRenderingContext2D:tr,CanvasGradient:er,CanvasPattern:rr,Image:ve,ImageData:nr,Path2D:ir,DOMMatrix:or,DOMRect:sr,DOMPoint:ar}=window,lr={Canvas:Qe,loadImage:Ye,CanvasRenderingContext2D:tr,CanvasGradient:er,CanvasPattern:rr,Image:ve,ImageData:nr,Path2D:ir,DOMMatrix:or,DOMRect:sr,DOMPoint:ar},kt=(o,t,e={},r=e)=>{if(Array.isArray(t))t.forEach(n=>kt(o,n,e,r));else if(typeof t=="function")t(o,e,r,kt);else{const n=Object.keys(t)[0];Array.isArray(t[n])?(r[n]={},kt(o,t[n],e,r[n])):r[n]=t[n](o,e,r,kt)}return e},bt=(o,t)=>(e,r,n,i)=>{t(e,r,n)&&i(e,o,r,n)},cr=(o,t)=>(e,r,n,i)=>{const s=[];let l=e.pos;for(;t(e,r,n);){const a={};if(i(e,o,r,a),e.pos===l)break;l=e.pos,s.push(a)}return s},ur=o=>({data:o,pos:0}),Q=()=>o=>o.data[o.pos++],be=(o=0)=>t=>t.data[t.pos+o],st=o=>t=>t.data.subarray(t.pos,t.pos+=o),Mt=o=>t=>t.data.subarray(t.pos,t.pos+o),Ht=o=>t=>Array.from(st(o)(t)).map(e=>String.fromCharCode(e)).join(""),mt=o=>t=>{const e=st(2)(t);return o?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]},we=(o,t)=>(e,r,n)=>{const i=typeof t=="function"?t(e,r,n):t,s=st(o),l=new Array(i);for(var a=0;a<i;a++)l[a]=s(e);return l},fr=(o,t,e)=>{for(var r=0,n=0;n<e;n++)r+=o[t+n]&&2**(e-n-1);return r},Zt=o=>t=>{const e=Q()(t),r=new Array(8);for(var n=0;n<8;n++)r[7-n]=!!(e&1<<n);return Object.keys(o).reduce((i,s)=>{const l=o[s];return l.length?i[s]=fr(r,l.index,l.length):i[s]=r[l.index],i},{})};var Ft={blocks:o=>{const e=[],r=o.data.length;for(var n=0,i=Q()(o);i!==0&&i;i=Q()(o)){if(o.pos+i>=r){const c=r-o.pos;e.push(st(c)(o)),n+=c;break}e.push(st(i)(o)),n+=i}const s=new Uint8Array(n);for(var l=0,a=0;a<e.length;a++)s.set(e[a],l),l+=e[a].length;return s}};const hr=bt({gce:[{codes:st(2)},{byteSize:Q()},{extras:Zt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:mt(!0)},{transparentColorIndex:Q()},{terminator:Q()}]},o=>{var t=Mt(2)(o);return t[0]===33&&t[1]===249}),dr=bt({image:[{code:Q()},{descriptor:[{left:mt(!0)},{top:mt(!0)},{width:mt(!0)},{height:mt(!0)},{lct:Zt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},bt({lct:we(3,(o,t,e)=>Math.pow(2,e.descriptor.lct.size+1))},(o,t,e)=>e.descriptor.lct.exists),{data:[{minCodeSize:Q()},Ft]}]},o=>be()(o)===44),gr=bt({text:[{codes:st(2)},{blockSize:Q()},{preData:(o,t,e)=>st(e.text.blockSize)(o)},Ft]},o=>{var t=Mt(2)(o);return t[0]===33&&t[1]===1}),pr=bt({application:[{codes:st(2)},{blockSize:Q()},{id:(o,t,e)=>Ht(e.blockSize)(o)},Ft]},o=>{var t=Mt(2)(o);return t[0]===33&&t[1]===255}),mr=bt({comment:[{codes:st(2)},Ft]},o=>{var t=Mt(2)(o);return t[0]===33&&t[1]===254}),vr=[{header:[{signature:Ht(3)},{version:Ht(3)}]},{lsd:[{width:mt(!0)},{height:mt(!0)},{gct:Zt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:Q()},{pixelAspectRatio:Q()}]},bt({gct:we(3,(o,t)=>Math.pow(2,t.lsd.gct.size+1))},(o,t)=>t.lsd.gct.exists),{frames:cr([hr,pr,mr,dr,gr],o=>{var t=be()(o);return t===33||t===44})}],br=(o,t)=>{const e=new Array(o.length),r=o.length/t,n=function(f,h){const v=o.slice(h*t,(h+1)*t);e.splice.apply(e,[f*t,t].concat(v))},i=[0,4,2,1],s=[8,8,4,2];for(var l=0,a=0;a<4;a++)for(var c=i[a];c<r;c+=s[a])n(c,l),l++;return e},wr=(o,t,e)=>{const i=e;var s,l,a,c,f,h,v,y,_,w,d,D,m,x,E,A;const U=new Array(e),g=new Array(4096),p=new Array(4096),k=new Array(4096+1);for(D=o,l=1<<D,f=l+1,s=l+2,v=-1,c=D+1,a=(1<<c)-1,_=0;_<l;_++)g[_]=0,p[_]=_;var d,y,m,x,A,E;for(d=y=m=x=A=E=0,w=0;w<i;){if(x===0){if(y<c){d+=t[E]<<y,y+=8,E++;continue}if(_=d&a,d>>=c,y-=c,_>s||_==f)break;if(_==l){c=D+1,a=(1<<c)-1,s=l+2,v=-1;continue}if(v==-1){k[x++]=p[_],v=_,m=_;continue}for(h=_,_==s&&(k[x++]=m,_=v);_>l;)k[x++]=p[_],_=g[_];m=p[_]&255,k[x++]=m,s<4096&&(g[s]=v,p[s]=m,s++,!(s&a)&&s<4096&&(c++,a+=s)),v=h}x--,U[A++]=k[x],w++}for(w=A;w<i;w++)U[w]=0;return U},yr=o=>{const t=new Uint8Array(o);return kt(ur(t),vr)},xr=o=>{const t=o.pixels.length,e=new Uint8ClampedArray(t*4);for(var r=0;r<t;r++){const n=r*4,i=o.pixels[r],s=o.colorTable[i];e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=i!==o.transparentIndex?255:0}return e},Cr=(o,t,e)=>{if(!o.image){console.warn("gif frame does not have associated image.");return}const{image:r}=o,n=r.descriptor.width*r.descriptor.height;var i=wr(r.data.minCodeSize,r.data.blocks,n);r.descriptor.lct.interlaced&&(i=br(i,r.descriptor.width));const s={pixels:i,dims:{top:o.image.descriptor.top,left:o.image.descriptor.left,width:o.image.descriptor.width,height:o.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?s.colorTable=r.lct:s.colorTable=t,o.gce&&(s.delay=(o.gce.delay||10)*10,s.disposalType=o.gce.extras.disposal,o.gce.extras.transparentColorGiven&&(s.transparentIndex=o.gce.transparentColorIndex)),e&&(s.patch=xr(s)),s},_r=(o,t)=>o.frames.filter(e=>e.image).map(e=>Cr(e,o.gct,t));function kr(o,t,e){const r=ye(t),n=o-1;let i=0;switch(e){case q.L:i=ot[n][0];break;case q.M:i=ot[n][1];break;case q.Q:i=ot[n][2];break;case q.H:i=ot[n][3];break}return r<=i}function Ar(o,t){for(var e=1,r=ye(o),n=0,i=ot.length;n<i;n++){var s=0;switch(t){case q.L:s=ot[n][0];break;case q.M:s=ot[n][1];break;case q.Q:s=ot[n][2];break;case q.H:s=ot[n][3];break}if(r<=s)break;e++}if(e>ot.length)throw new Error("Too long data");return e}function ye(o){var t=encodeURI(o).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(o)?3:0)}class Pr{constructor(t){this.mode=W.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const e=[];for(let r=0,n=this.data.length;r<n;r++){const i=[],s=this.data.charCodeAt(r);s>65536?(i[0]=240|(s&1835008)>>>18,i[1]=128|(s&258048)>>>12,i[2]=128|(s&4032)>>>6,i[3]=128|s&63):s>2048?(i[0]=224|(s&61440)>>>12,i[1]=128|(s&4032)>>>6,i[2]=128|s&63):s>128?(i[0]=192|(s&1984)>>>6,i[1]=128|s&63):i[0]=s,e.push(i)}this.parsedData=Array.prototype.concat.apply([],e),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}}class gt{constructor(t=-1,e=q.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=Ar(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!kr(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const e=new Pr(t);this.dataList.push(e),this.dataCache=void 0}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=gt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(let n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(ut).includes(this.maskPattern))return this.maskPattern;let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);const n=M.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=M.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++){const n=t[e],i=t[r];if(this.modules[n][i]==null)for(let s=-2;s<=2;s++)for(let l=-2;l<=2;l++)s==-2||s==2||l==-2||l==2||s==0&&l==0?this.modules[n+s][i+l]=!0:this.modules[n+s][i+l]=!1}}setupTypeNumber(t){const e=M.getBCHTypeNumber(this.typeNumber);for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}}setupTypeInfo(t,e){const r=this.errorCorrectLevel<<3|e,n=M.getBCHTypeInfo(r);for(var i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let r=-1,n=this.moduleCount-1,i=7,s=0;for(let l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(let a=0;a<2;a++)if(this.modules[n][l-a]==null){let c=!1;s<t.length&&(c=(t[s]>>>i&1)==1),M.getMask(e,n,l-a)&&(c=!c),this.modules[n][l-a]=c,i--,i==-1&&(s++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}static createData(t,e,r){const n=ft.getRSBlocks(t,e),i=new Br;for(var s=0;s<r.length;s++){const a=r[s];i.put(a.mode,4),i.put(a.getLength(),M.getLengthInBits(a.mode,t)),a.write(i)}let l=0;for(var s=0;s<n.length;s++)l+=n[s].dataCount;if(i.getLengthInBits()>l*8)throw new Error(`code length overflow. (${i.getLengthInBits()}>${l*8})`);for(i.getLengthInBits()+4<=l*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=l*8||(i.put(gt.PAD0,8),i.getLengthInBits()>=l*8));)i.put(gt.PAD1,8);return gt.createBytes(i,n)}static createBytes(t,e){let r=0,n=0,i=0;const s=new Array(e.length),l=new Array(e.length);for(var a=0;a<e.length;a++){const _=e[a].dataCount,w=e[a].totalCount-_;n=Math.max(n,_),i=Math.max(i,w),s[a]=new Array(_);for(var c=0;c<s[a].length;c++)s[a][c]=255&t.buffer[c+r];r+=_;const D=M.getErrorCorrectPolynomial(w),g=new yt(s[a],D.getLength()-1).mod(D);l[a]=new Array(D.getLength()-1);for(var c=0;c<l[a].length;c++){const k=c+g.getLength()-l[a].length;l[a][c]=k>=0?g.get(k):0}}let f=0;for(var c=0;c<e.length;c++)f+=e[c].totalCount;const h=new Array(f);let v=0;for(var c=0;c<n;c++)for(var a=0;a<e.length;a++)c<s[a].length&&(h[v++]=s[a][c]);for(var c=0;c<i;c++)for(var a=0;a<e.length;a++)c<l[a].length&&(h[v++]=l[a][c]);return h}}gt.PAD0=236;gt.PAD1=17;const q={L:1,M:0,Q:3,H:2},W={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ut={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class M{static getBCHTypeInfo(t){let e=t<<10;for(;M.getBCHDigit(e)-M.getBCHDigit(M.G15)>=0;)e^=M.G15<<M.getBCHDigit(e)-M.getBCHDigit(M.G15);return(t<<10|e)^M.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;M.getBCHDigit(e)-M.getBCHDigit(M.G18)>=0;)e^=M.G18<<M.getBCHDigit(e)-M.getBCHDigit(M.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;t!=0;)e++,t>>>=1;return e}static getPatternPosition(t){return M.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,r){switch(t){case ut.PATTERN000:return(e+r)%2==0;case ut.PATTERN001:return e%2==0;case ut.PATTERN010:return r%3==0;case ut.PATTERN011:return(e+r)%3==0;case ut.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case ut.PATTERN101:return e*r%2+e*r%3==0;case ut.PATTERN110:return(e*r%2+e*r%3)%2==0;case ut.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let e=new yt([1],0);for(let r=0;r<t;r++)e=e.multiply(new yt([1,G.gexp(r)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case W.MODE_NUMBER:return 10;case W.MODE_ALPHA_NUM:return 9;case W.MODE_8BIT_BYTE:return 8;case W.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(e<27)switch(t){case W.MODE_NUMBER:return 12;case W.MODE_ALPHA_NUM:return 11;case W.MODE_8BIT_BYTE:return 16;case W.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else if(e<41)switch(t){case W.MODE_NUMBER:return 14;case W.MODE_ALPHA_NUM:return 13;case W.MODE_8BIT_BYTE:return 16;case W.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}else throw new Error(`type:${e}`)}static getLostPoint(t){const e=t.getModuleCount();let r=0;for(var n=0;n<e;n++)for(var i=0;i<e;i++){let a=0;const c=t.isDark(n,i);for(let f=-1;f<=1;f++)if(!(n+f<0||e<=n+f))for(let h=-1;h<=1;h++)i+h<0||e<=i+h||f==0&&h==0||c==t.isDark(n+f,i+h)&&a++;a>5&&(r+=3+a-5)}for(var n=0;n<e-1;n++)for(var i=0;i<e-1;i++){let f=0;t.isDark(n,i)&&f++,t.isDark(n+1,i)&&f++,t.isDark(n,i+1)&&f++,t.isDark(n+1,i+1)&&f++,(f==0||f==4)&&(r+=3)}for(var n=0;n<e;n++)for(var i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(r+=40);for(var i=0;i<e;i++)for(var n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(r+=40);let s=0;for(var i=0;i<e;i++)for(var n=0;n<e;n++)t.isDark(n,i)&&s++;const l=Math.abs(100*s/e/e-50)/5;return r+=l*10,r}}M.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];M.G15=1335;M.G18=7973;M.G15_MASK=21522;class G{static glog(t){if(t<1)throw new Error(`glog(${t})`);return G.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return G.EXP_TABLE[t]}}G.EXP_TABLE=new Array(256);G.LOG_TABLE=new Array(256);G._constructor=function(){for(var o=0;o<8;o++)G.EXP_TABLE[o]=1<<o;for(var o=8;o<256;o++)G.EXP_TABLE[o]=G.EXP_TABLE[o-4]^G.EXP_TABLE[o-5]^G.EXP_TABLE[o-6]^G.EXP_TABLE[o-8];for(var o=0;o<255;o++)G.LOG_TABLE[G.EXP_TABLE[o]]=o}();class yt{constructor(t,e){if(t.length==null)throw new Error(`${t.length}/${e}`);let r=0;for(;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(let n=0;n<t.length-r;n++)this.num[n]=t[n+r]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const e=new Array(this.getLength()+t.getLength()-1);for(let r=0;r<this.getLength();r++)for(let n=0;n<t.getLength();n++)e[r+n]^=G.gexp(G.glog(this.get(r))+G.glog(t.get(n)));return new yt(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const e=G.glog(this.get(0))-G.glog(t.get(0)),r=new Array(this.getLength());for(var n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=G.gexp(G.glog(t.get(n))+e);return new yt(r,0).mod(t)}}class ft{constructor(t,e){this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){const r=ft.getRsBlockTable(t,e);if(r==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);const n=r.length/3,i=[];for(let s=0;s<n;s++){const l=r[s*3+0],a=r[s*3+1],c=r[s*3+2];for(let f=0;f<l;f++)i.push(new ft(a,c))}return i}static getRsBlockTable(t,e){switch(e){case q.L:return ft.RS_BLOCK_TABLE[(t-1)*4+0];case q.M:return ft.RS_BLOCK_TABLE[(t-1)*4+1];case q.Q:return ft.RS_BLOCK_TABLE[(t-1)*4+2];case q.H:return ft.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}ft.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class Br{constructor(){this.buffer=[],this.length=0}get(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1}put(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}const ot=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var Dr=100,Z=256,oe=Z-1,dt=4,xe=16,Vt=1<<xe,Ce=10,qt=10,Tr=Vt>>qt,Er=Vt<<Ce-qt,Sr=Z>>3,Kt=6,Ir=1<<Kt,Lr=Sr*Ir,Mr=30,_e=10,Dt=1<<_e,ke=8,se=1<<ke,Fr=_e+ke,wt=1<<Fr,ae=499,le=491,ce=487,Ae=503,Nr=3*Ae;function Or(o,t){var e,r,n,i,s;function l(){e=[],r=new Int32Array(256),n=new Int32Array(Z),i=new Int32Array(Z),s=new Int32Array(Z>>3);var g,p;for(g=0;g<Z;g++)p=(g<<dt+8)/Z,e[g]=new Float64Array([p,p,p,0]),i[g]=Vt/Z,n[g]=0}function a(){for(var g=0;g<Z;g++)e[g][0]>>=dt,e[g][1]>>=dt,e[g][2]>>=dt,e[g][3]=g}function c(g,p,k,d,y){e[p][0]-=g*(e[p][0]-k)/Dt,e[p][1]-=g*(e[p][1]-d)/Dt,e[p][2]-=g*(e[p][2]-y)/Dt}function f(g,p,k,d,y){for(var m=Math.abs(p-g),x=Math.min(p+g,Z),A=p+1,E=p-1,F=1,u,N;A<x||E>m;)N=s[F++],A<x&&(u=e[A++],u[0]-=N*(u[0]-k)/wt,u[1]-=N*(u[1]-d)/wt,u[2]-=N*(u[2]-y)/wt),E>m&&(u=e[E--],u[0]-=N*(u[0]-k)/wt,u[1]-=N*(u[1]-d)/wt,u[2]-=N*(u[2]-y)/wt)}function h(g,p,k){var d=2147483647,y=d,m=-1,x=m,A,E,F,u,N;for(A=0;A<Z;A++)E=e[A],F=Math.abs(E[0]-g)+Math.abs(E[1]-p)+Math.abs(E[2]-k),F<d&&(d=F,m=A),u=F-(n[A]>>xe-dt),u<y&&(y=u,x=A),N=i[A]>>qt,i[A]-=N,n[A]+=N<<Ce;return i[m]+=Tr,n[m]-=Er,x}function v(){var g,p,k,d,y,m,x=0,A=0;for(g=0;g<Z;g++){for(k=e[g],y=g,m=k[1],p=g+1;p<Z;p++)d=e[p],d[1]<m&&(y=p,m=d[1]);if(d=e[y],g!=y&&(p=d[0],d[0]=k[0],k[0]=p,p=d[1],d[1]=k[1],k[1]=p,p=d[2],d[2]=k[2],k[2]=p,p=d[3],d[3]=k[3],k[3]=p),m!=x){for(r[x]=A+g>>1,p=x+1;p<m;p++)r[p]=g;x=m,A=g}}for(r[x]=A+oe>>1,p=x+1;p<256;p++)r[p]=oe}function _(g,p,k){for(var d,y,m,x=1e3,A=-1,E=r[p],F=E-1;E<Z||F>=0;)E<Z&&(y=e[E],m=y[1]-p,m>=x?E=Z:(E++,m<0&&(m=-m),d=y[0]-g,d<0&&(d=-d),m+=d,m<x&&(d=y[2]-k,d<0&&(d=-d),m+=d,m<x&&(x=m,A=y[3])))),F>=0&&(y=e[F],m=p-y[1],m>=x?F=-1:(F--,m<0&&(m=-m),d=y[0]-g,d<0&&(d=-d),m+=d,m<x&&(d=y[2]-k,d<0&&(d=-d),m+=d,m<x&&(x=m,A=y[3]))));return A}function w(){var g,p=o.length,k=30+(t-1)/3,d=p/(3*t),y=~~(d/Dr),m=Dt,x=Lr,A=x>>Kt;for(A<=1&&(A=0),g=0;g<A;g++)s[g]=m*((A*A-g*g)*se/(A*A));var E;p<Nr?(t=1,E=3):p%ae!==0?E=3*ae:p%le!==0?E=3*le:p%ce!==0?E=3*ce:E=3*Ae;var F,u,N,C,O=0;for(g=0;g<d;)if(F=(o[O]&255)<<dt,u=(o[O+1]&255)<<dt,N=(o[O+2]&255)<<dt,C=h(F,u,N),c(m,C,F,u,N),A!==0&&f(A,C,F,u,N),O+=E,O>=p&&(O-=p),g++,y===0&&(y=1),g%y===0)for(m-=m/k,x-=x/Mr,A=x>>Kt,A<=1&&(A=0),C=0;C<A;C++)s[C]=m*((A*A-C*C)*se/(A*A))}function D(){l(),w(),a(),v()}this.buildColormap=D;function U(){for(var g=[],p=[],k=0;k<Z;k++)p[e[k][3]]=k;for(var d=0,y=0;y<Z;y++){var m=p[y];g[d++]=e[m][0],g[d++]=e[m][1],g[d++]=e[m][2]}return g}this.getColormap=U,this.lookupRGB=_}var ue=-1,Tt=12,_t=5003,Rr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function $r(o,t,e,r){var n=Math.max(2,r),i=new Uint8Array(256),s=new Int32Array(_t),l=new Int32Array(_t),a,c=0,f,h=0,v,_=!1,w,D,U,g,p,k;function d(C,O){i[f++]=C,f>=254&&E(O)}function y(C){m(_t),h=D+2,_=!0,N(D,C)}function m(C){for(var O=0;O<C;++O)s[O]=-1}function x(C,O){var b,pt,z,tt,ht,H,et;for(w=C,_=!1,k=w,v=F(k),D=1<<C-1,U=D+1,h=D+2,f=0,tt=u(),et=0,b=_t;b<65536;b*=2)++et;et=8-et,H=_t,m(H),N(D,O);t:for(;(pt=u())!=ue;){if(b=(pt<<Tt)+tt,z=pt<<et^tt,s[z]===b){tt=l[z];continue}else if(s[z]>=0){ht=H-z,z===0&&(ht=1);do if((z-=ht)<0&&(z+=H),s[z]===b){tt=l[z];continue t}while(s[z]>=0)}N(tt,O),tt=pt,h<1<<Tt?(l[z]=h++,s[z]=b):y(O)}N(tt,O),N(U,O)}function A(C){C.writeByte(n),g=o*t,p=0,x(n+1,C),C.writeByte(0)}function E(C){f>0&&(C.writeByte(f),C.writeBytes(i,0,f),f=0)}function F(C){return(1<<C)-1}function u(){if(g===0)return ue;--g;var C=e[p++];return C&255}function N(C,O){for(a&=Rr[c],c>0?a|=C<<c:a=C,c+=k;c>=8;)d(a&255,O),a>>=8,c-=8;if((h>v||_)&&(_?(v=F(k=w),_=!1):(++k,k==Tt?v=1<<Tt:v=F(k))),C==U){for(;c>0;)d(a&255,O),a>>=8,c-=8;E(O)}}this.encode=A}function J(){this.page=-1,this.pages=[],this.newPage()}J.pageSize=4096;J.charMap={};for(var Et=0;Et<256;Et++)J.charMap[Et]=String.fromCharCode(Et);J.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(J.pageSize),this.cursor=0};J.prototype.getData=function(){for(var o="",t=0;t<this.pages.length;t++)for(var e=0;e<J.pageSize;e++)o+=J.charMap[this.pages[t][e]];return o};J.prototype.toFlattenUint8Array=function(){const o=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const r=Uint8Array.from(this.pages[t].slice(0,this.cursor));o.push(r)}else o.push(this.pages[t]);const e=new Uint8Array(o.reduce((r,n)=>r+n.length,0));return o.reduce((r,n)=>(e.set(n,r),r+n.length),0),e};J.prototype.writeByte=function(o){this.cursor>=J.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=o};J.prototype.writeUTFBytes=function(o){for(var t=o.length,e=0;e<t;e++)this.writeByte(o.charCodeAt(e))};J.prototype.writeBytes=function(o,t,e){for(var r=e||o.length,n=t||0;n<r;n++)this.writeByte(o[n])};function R(o,t){this.width=~~o,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new J}R.prototype.setDelay=function(o){this.delay=Math.round(o/10)};R.prototype.setFrameRate=function(o){this.delay=Math.round(100/o)};R.prototype.setDispose=function(o){o>=0&&(this.dispose=o)};R.prototype.setRepeat=function(o){this.repeat=o};R.prototype.setTransparent=function(o){this.transparent=o};R.prototype.addFrame=function(o){this.image=o,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};R.prototype.finish=function(){this.out.writeByte(59)};R.prototype.setQuality=function(o){o<1&&(o=1),this.sample=o};R.prototype.setDither=function(o){o===!0&&(o="FloydSteinberg"),this.dither=o};R.prototype.setGlobalPalette=function(o){this.globalPalette=o};R.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};R.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};R.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new Or(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};R.prototype.indexPixels=function(o){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,r=0;r<t;r++){var n=this.findClosestRGB(this.pixels[e++]&255,this.pixels[e++]&255,this.pixels[e++]&255);this.usedEntry[n]=!0,this.indexedPixels[r]=n}};R.prototype.ditherPixels=function(o,t){var e={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!o||!e[o])throw"Unknown dithering kernel: "+o;var r=e[o],n=0,i=this.height,s=this.width,l=this.pixels,a=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<i;c++){t&&(a=a*-1);for(var f=a==1?0:s-1,h=a==1?s:0;f!==h;f+=a){n=c*s+f;var v=n*3,_=l[v],w=l[v+1],D=l[v+2];v=this.findClosestRGB(_,w,D),this.usedEntry[v]=!0,this.indexedPixels[n]=v,v*=3;for(var U=this.colorTab[v],g=this.colorTab[v+1],p=this.colorTab[v+2],k=_-U,d=w-g,y=D-p,m=a==1?0:r.length-1,x=a==1?r.length:0;m!==x;m+=a){var A=r[m][1],E=r[m][2];if(A+f>=0&&A+f<s&&E+c>=0&&E+c<i){var F=r[m][0];v=n+A+E*s,v*=3,l[v]=Math.max(0,Math.min(255,l[v]+k*F)),l[v+1]=Math.max(0,Math.min(255,l[v+1]+d*F)),l[v+2]=Math.max(0,Math.min(255,l[v+2]+y*F))}}}}};R.prototype.findClosest=function(o,t){return this.findClosestRGB((o&16711680)>>16,(o&65280)>>8,o&255,t)};R.prototype.findClosestRGB=function(o,t,e,r){if(this.colorTab===null)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(o,t,e);for(var n=0,i=256*256*256,s=this.colorTab.length,l=0,a=0;l<s;a++){var c=o-(this.colorTab[l++]&255),f=t-(this.colorTab[l++]&255),h=e-(this.colorTab[l++]&255),v=c*c+f*f+h*h;(!r||this.usedEntry[a])&&v<i&&(i=v,n=a)}return n};R.prototype.getImagePixels=function(){var o=this.width,t=this.height;this.pixels=new Uint8Array(o*t*3);for(var e=this.image,r=0,n=0,i=0;i<t;i++)for(var s=0;s<o;s++)this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],r++};R.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var o,t;this.transparent===null?(o=0,t=0):(o=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|o),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};R.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};R.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};R.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};R.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var o=3*256-this.colorTab.length,t=0;t<o;t++)this.out.writeByte(0)};R.prototype.writeShort=function(o){this.out.writeByte(o&255),this.out.writeByte(o>>8&255)};R.prototype.writePixels=function(){var o=new $r(this.width,this.height,this.indexedPixels,this.colorDepth);o.encode(this.out)};R.prototype.stream=function(){return this.out};var jr=globalThis&&globalThis.__awaiter||function(o,t,e,r){function n(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function l(f){try{c(r.next(f))}catch(h){s(h)}}function a(f){try{c(r.throw(f))}catch(h){s(h)}}function c(f){f.done?i(f.value):n(f.value).then(l,a)}c((r=r.apply(o,t||[])).next())})};const{Canvas:lt}=lr,St=.4;function fe(o){if(!o)return;function t(e){e.onload=null,e.onerror=null}return new Promise(function(e,r){if(o.slice(0,4)=="data"){let i=new Image;i.onload=function(){e(i),t(i)},i.onerror=function(){r("Image load error"),t(i)},i.src=o;return}let n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){e(n)},n.onerror=function(){r("Image load error")},n.src=o})}class L{constructor(t){const e=Object.assign({},t);if(Object.keys(L.defaultOptions).forEach(r=>{r in e||Object.defineProperty(e,r,{value:L.defaultOptions[r],enumerable:!0,writable:!0})}),e.components?typeof e.components=="object"&&Object.keys(L.defaultComponentOptions).forEach(r=>{r in e.components?Object.defineProperty(e.components,r,{value:Object.assign(Object.assign({},L.defaultComponentOptions[r]),e.components[r]),enumerable:!0,writable:!0}):Object.defineProperty(e.components,r,{value:L.defaultComponentOptions[r],enumerable:!0,writable:!0})}):e.components=L.defaultComponentOptions,e.dotScale!==null&&e.dotScale!==void 0){if(e.dotScale<=0||e.dotScale>1)throw new Error("dotScale should be in range (0, 1].");e.components.data.scale=e.dotScale,e.components.timing.scale=e.dotScale,e.components.alignment.scale=e.dotScale}this.options=e,this.canvas=new lt(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new gt(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,e,r,n,i,s){t.beginPath(),t.moveTo(e,r),t.arcTo(e+n,r,e+n,r+i,s),t.arcTo(e+n,r+i,e,r+i,s),t.arcTo(e,r+i,e,r,s),t.arcTo(e,r,e+n,r,s),t.closePath()}static _getAverageRGB(t){const r={r:0,g:0,b:0};let n,i,s=-4;const l={r:0,g:0,b:0};let a=0;i=t.naturalHeight||t.height,n=t.naturalWidth||t.width;const f=new lt(n,i).getContext("2d");if(!f)return r;f.drawImage(t,0,0);let h;try{h=f.getImageData(0,0,n,i)}catch{return r}for(;(s+=5*4)<h.data.length;)h.data[s]>200||h.data[s+1]>200||h.data[s+2]>200||(++a,l.r+=h.data[s],l.g+=h.data[s+1],l.b+=h.data[s+2]);return l.r=~~(l.r/a),l.g=~~(l.g/a),l.b=~~(l.b/a),l}static _drawDot(t,e,r,n,i=0,s=1){t.fillRect((e+i)*n,(r+i)*n,s*n,s*n)}static _drawAlignProtector(t,e,r,n){t.clearRect((e-2)*n,(r-2)*n,5*n,5*n),t.fillRect((e-2)*n,(r-2)*n,5*n,5*n)}static _drawAlign(t,e,r,n,i=0,s=1,l,a){const c=t.fillStyle;t.fillStyle=l,new Array(4).fill(0).map((f,h)=>{L._drawDot(t,e-2+h,r-2,n,i,s),L._drawDot(t,e+2,r-2+h,n,i,s),L._drawDot(t,e+2-h,r+2,n,i,s),L._drawDot(t,e-2,r+2-h,n,i,s)}),L._drawDot(t,e,r,n,i,s),a||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((f,h)=>{L._drawDot(t,e-1+h,r-1,n,i,s),L._drawDot(t,e+1,r-1+h,n,i,s),L._drawDot(t,e+1-h,r+1,n,i,s),L._drawDot(t,e-1,r+1-h,n,i,s)})),t.fillStyle=c}_draw(){var t,e,r,n,i,s,l,a,c,f,h,v,_,w,D,U,g,p,k;return jr(this,void 0,void 0,function*(){const d=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,y=this.options.size;let m=this.options.margin;(m<0||m*2>=y)&&(m=0);const x=Math.ceil(m),A=y-2*m,E=this.options.whiteMargin,F=this.options.backgroundDimming,u=Math.ceil(A/d),N=u*d,C=N+2*x,O=new lt(C,C),b=O.getContext("2d");this._clear(),b.save(),b.translate(x,x);const pt=new lt(C,C),z=pt.getContext("2d");let tt=null,ht=[];if(this.options.gifBackground){const P=yr(this.options.gifBackground);if(tt=P,ht=_r(P,!0),this.options.autoColor){let B=0,S=0,I=0,X=0;for(let $=0;$<ht[0].colorTable.length;$++){const j=ht[0].colorTable[$];j[0]>200||j[1]>200||j[2]>200||j[0]===0&&j[1]===0&&j[2]===0||(X++,B+=j[0],S+=j[1],I+=j[2])}B=~~(B/X),S=~~(S/X),I=~~(I/X),this.options.colorDark=`rgb(${B},${S},${I})`}}else if(this.options.backgroundImage){const P=yield fe(this.options.backgroundImage);if(this.options.autoColor){const B=L._getAverageRGB(P);this.options.colorDark=`rgb(${B.r},${B.g},${B.b})`}z.drawImage(P,0,0,P.width,P.height,0,0,C,C),z.rect(0,0,C,C),z.fillStyle=F,z.fill()}else z.rect(0,0,C,C),z.fillStyle=this.options.colorLight,z.fill();const H=M.getPatternPosition(this.qrCode.typeNumber),et=((r=(e=this.options.components)===null||e===void 0?void 0:e.data)===null||r===void 0?void 0:r.scale)||St,Jt=(1-et)*.5;for(let P=0;P<d;P++)for(let B=0;B<d;B++){const S=this.qrCode.isDark(P,B),I=B<8&&(P<8||P>=d-8)||B>=d-8&&P<8,X=P==6&&B>=8&&B<=d-8||B==6&&P>=8&&P<=d-8;let $=I||X;for(let V=1;V<H.length-1;V++)$=$||P>=H[V]-2&&P<=H[V]+2&&B>=H[V]-2&&B<=H[V]+2;const j=B*u+($?0:Jt*u),rt=P*u+($?0:Jt*u);if(b.strokeStyle=S?this.options.colorDark:this.options.colorLight,b.lineWidth=.5,b.fillStyle=S?this.options.colorDark:this.options.colorLight,H.length===0)$||b.fillRect(j,rt,($?1:et)*u,($?1:et)*u);else{const V=B<d-4&&B>=d-4-5&&P<d-4&&P>=d-4-5;!$&&!V&&b.fillRect(j,rt,($?1:et)*u,($?1:et)*u)}}const Y=H[H.length-1],Pe=this.options.colorLight;if(b.fillStyle=Pe,b.fillRect(0,0,8*u,8*u),b.fillRect(0,(d-8)*u,8*u,8*u),b.fillRect((d-8)*u,0,8*u,8*u),!((i=(n=this.options.components)===null||n===void 0?void 0:n.timing)===null||i===void 0)&&i.protectors&&(b.fillRect(8*u,6*u,(d-8-8)*u,u),b.fillRect(6*u,8*u,u,(d-8-8)*u)),!((l=(s=this.options.components)===null||s===void 0?void 0:s.cornerAlignment)===null||l===void 0)&&l.protectors&&L._drawAlignProtector(b,Y,Y,u),!((c=(a=this.options.components)===null||a===void 0?void 0:a.alignment)===null||c===void 0)&&c.protectors)for(let P=0;P<H.length;P++)for(let B=0;B<H.length;B++){const S=H[B],I=H[P];if(!(S===6&&(I===6||I===Y))){if(I===6&&(S===6||S===Y))continue;if(S===Y&&I===Y)continue;L._drawAlignProtector(b,S,I,u)}}b.fillStyle=this.options.colorDark,b.fillRect(0,0,7*u,u),b.fillRect((d-7)*u,0,7*u,u),b.fillRect(0,6*u,7*u,u),b.fillRect((d-7)*u,6*u,7*u,u),b.fillRect(0,(d-7)*u,7*u,u),b.fillRect(0,(d-7+6)*u,7*u,u),b.fillRect(0,0,u,7*u),b.fillRect(6*u,0,u,7*u),b.fillRect((d-7)*u,0,u,7*u),b.fillRect((d-7+6)*u,0,u,7*u),b.fillRect(0,(d-7)*u,u,7*u),b.fillRect(6*u,(d-7)*u,u,7*u),b.fillRect(2*u,2*u,3*u,3*u),b.fillRect((d-7+2)*u,2*u,3*u,3*u),b.fillRect(2*u,(d-7+2)*u,3*u,3*u);const Nt=((h=(f=this.options.components)===null||f===void 0?void 0:f.timing)===null||h===void 0?void 0:h.scale)||St,Wt=(1-Nt)*.5;for(let P=0;P<d-8;P+=2)L._drawDot(b,8+P,6,u,Wt,Nt),L._drawDot(b,6,8+P,u,Wt,Nt);const Yt=((_=(v=this.options.components)===null||v===void 0?void 0:v.cornerAlignment)===null||_===void 0?void 0:_.scale)||St,Be=(1-Yt)*.5;L._drawAlign(b,Y,Y,u,Be,Yt,this.options.colorDark,((D=(w=this.options.components)===null||w===void 0?void 0:w.cornerAlignment)===null||D===void 0?void 0:D.protectors)||!1);const Qt=((g=(U=this.options.components)===null||U===void 0?void 0:U.alignment)===null||g===void 0?void 0:g.scale)||St,De=(1-Qt)*.5;for(let P=0;P<H.length;P++)for(let B=0;B<H.length;B++){const S=H[B],I=H[P];if(!(S===6&&(I===6||I===Y))){if(I===6&&(S===6||S===Y))continue;if(S===Y&&I===Y)continue;L._drawAlign(b,S,I,u,De,Qt,this.options.colorDark,((k=(p=this.options.components)===null||p===void 0?void 0:p.alignment)===null||k===void 0?void 0:k.protectors)||!1)}}if(E&&(b.fillStyle=this.options.backgroundColor,b.fillRect(-x,-x,C,x),b.fillRect(-x,N,C,x),b.fillRect(N,-x,x,C),b.fillRect(-x,-x,x,C)),this.options.logoImage){const P=yield fe(this.options.logoImage);let B=this.options.logoScale,S=this.options.logoMargin,I=this.options.logoCornerRadius;(B<=0||B>=1)&&(B=.2),S<0&&(S=0),I<0&&(I=0);const X=N*B,$=.5*(C-X),j=$;b.restore(),b.fillStyle=this.options.logoBackgroundColor,b.save(),L._prepareRoundedCornerClip(b,$-S,j-S,X+2*S,X+2*S,I+S),b.clip();const rt=b.globalCompositeOperation;b.globalCompositeOperation="destination-out",b.fill(),b.globalCompositeOperation=rt,b.restore(),b.save(),L._prepareRoundedCornerClip(b,$,j,X,X,I),b.clip(),b.drawImage(P,$,j,X,X),b.restore(),b.save(),b.translate(x,x)}if(tt){let P,B,S,I,X,$;if(ht.forEach(function(j){P||(P=new R(y,y),P.setDelay(j.delay),P.setRepeat(0));const{width:rt,height:V}=j.dims;B||(B=new lt(rt,V),S=B.getContext("2d"),S.rect(0,0,B.width,B.height),S.fillStyle="#ffffff",S.fill()),(!I||!$||rt!==I.width||V!==I.height)&&(I=new lt(rt,V),X=I.getContext("2d"),$=X.createImageData(rt,V)),$.data.set(j.patch),X.putImageData($,0,0),S.drawImage(I.getContext("2d").canvas,j.dims.left,j.dims.top);const At=new lt(C,C),xt=At.getContext("2d");xt.drawImage(B.getContext("2d").canvas,0,0,C,C),xt.rect(0,0,C,C),xt.fillStyle=F,xt.fill(),xt.drawImage(O.getContext("2d").canvas,0,0,C,C);const Ot=new lt(y,y),te=Ot.getContext("2d");te.drawImage(At.getContext("2d").canvas,0,0,y,y),P.addFrame(te.getImageData(0,0,Ot.width,Ot.height).data)}),!P)throw new Error("No frames.");if(P.finish(),he(this.canvas)){const rt=P.stream().toFlattenUint8Array().reduce((V,At)=>V+String.fromCharCode(At),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(rt)}`)}return Promise.resolve(Buffer.from(P.stream().toFlattenUint8Array()))}else{z.drawImage(O.getContext("2d").canvas,0,0,C,C),b.drawImage(pt.getContext("2d").canvas,-x,-x,C,C);const P=new lt(y,y);P.getContext("2d").drawImage(O.getContext("2d").canvas,0,0,y,y),this.canvas=P;const S=this.options.gifBackground?"gif":"png";return he(this.canvas)?Promise.resolve(this.canvas.toDataURL(S)):Promise.resolve(this.canvas.toBuffer(S))}})}}L.CorrectLevel=q;L.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};L.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:q.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:L.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function he(o){try{return o instanceof HTMLElement}catch{return typeof o=="object"&&o.nodeType===1&&typeof o.style=="object"&&typeof o.ownerDocument=="object"}}const Ur={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const e=await je(this.gifBgSrc),r=this.logoSrc;this.render(void 0,r,e);return}const o=this.bgSrc,t=this.logoSrc;this.render(o,t)},async render(o,t,e){const r=this;new L({gifBackground:e,text:r.text,size:r.size,margin:r.margin,colorDark:r.colorDark,colorLight:r.colorLight,backgroundColor:r.backgroundColor,backgroundImage:o,backgroundDimming:r.backgroundDimming,logoImage:t,logoScale:r.logoScale,logoBackgroundColor:r.logoBackgroundColor,correctLevel:r.correctLevel,logoMargin:r.logoMargin,logoCornerRadius:r.logoCornerRadius,whiteMargin:$t(r.whiteMargin),dotScale:r.dotScale,autoColor:$t(r.autoColor),binarize:$t(r.binarize),binarizeThreshold:r.binarizeThreshold,components:r.components}).draw().then(n=>{this.imgUrl=n,r.callback&&r.callback(n,r.qid)})}}},zr=["src"];function Gr(o,t,e,r,n,i){return e.bindElement?(it(),ct("img",{key:0,style:{display:"inline-block"},src:n.imgUrl},null,8,zr)):ge("",!0)}const Hr=de(Ur,[["render",Gr]]),Kr={class:"bg"},Xr={class:"detail"},Zr=["src"],Vr={class:"info"},qr={class:"animation"},Jr={class:"title"},Wr=["src"],Yr={class:"pl-5px grid grid-cols-2"},Qr=["src"],tn={class:"grid"},en={class:"text-36px text-#405D80 count-to"},rn={class:"text-15px"},nn={class:"text-[#7D95B3] text-16px"},on={class:"detail-list"},sn=["src"],an={class:"mt-40px"},ln={class:"flex justify-between mb-18px"},cn={class:"contact"},un=["src"],fn={class:"detail-iframe"},hn=["src"],dn={key:0,class:"pt-98px pl-52px"},gn={class:"text-#405D80 text-48px flex items-center mb-99px"},pn=["src"],mn=["src"],vn=["src"],bn=Ie({__name:"detail",setup(o){const t=Rt(),e=ee({text:"https://github.com/Binaryify/vue-qr",logo:at("pc/code-logo.png")}),r=ee({show:!1,width:700,height:724,title:"",type:"",imgUrl:""}),n=Rt(!1),i=Rt("https://github.com/Binaryify/vue-qr");Le(()=>{fetch("./src/assets/json/special.json").then(a=>a.json()).then(a=>{t.value=a})});const s=a=>{r.imgUrl=a},l=a=>{switch(r.show=!0,r.type=a,a){case"contact":r.title="联系我们";break;case"qrCode":r.title="二维码";break}};return(a,c)=>{var _;const f=Se,h=Te,v=Ee;return it(),ct(Ct,null,[T("div",Kr,[Pt(Re),T("div",Xr,[T("div",null,[T("img",{onClick:c[0]||(c[0]=w=>K($e)()),class:"w-132px h-56px",src:K(at)("pc/icon-go-back.png")},null,8,Zr),T("div",Vr,[T("div",qr,[(it(),ct(Ct,null,Bt(2,w=>T("div",{key:w,class:"ling"})),64))]),T("div",Jr,[c[6]||(c[6]=T("span",null,"地块概况",-1)),T("img",{class:"line",src:K(at)("pc/special-train-line.png")},null,8,Wr)]),T("div",Yr,[(it(!0),ct(Ct,null,Bt((_=K(t))==null?void 0:_.count,w=>(it(),ct("div",{key:w.content,class:"mt-24px flex items-end"},[T("img",{loading:"lazy",class:"w-64px h-64px mr-12px",src:K(at)(w.img),alt:"img"},null,8,Qr),T("div",tn,[T("div",en,[w.content?(it(),Ne(f,{key:0,end:Number(w.content),autoPlay:!0,duration:3e3},null,8,["end"])):ge("",!0),T("span",rn," "+re(w.unit),1)]),T("span",nn,re(w.title),1)])]))),128))]),T("div",on,[T("img",{class:"w-12px h-12px mr-8px",src:K(at)("pc/detail-icon.png")},null,8,sn),c[7]||(c[7]=T("span",{class:"text-16px text-#405D80 line-height-24px"},"地块概况：地块位于沿路大道以南，金鹰路以 西，金鹏路以东…........",-1))])])]),T("div",an,[T("div",ln,[(it(),ct(Ct,null,Bt(2,w=>T("div",{class:"contrast",key:w},c[8]||(c[8]=[T("div",{class:"contrast-state"},"状态",-1),T("img",{class:"w-full h-full",src:"https://avatar.moonshot.cn/avatar/cpqf47e768j5a4ljc6ig/1723038080.jpeg"},null,-1)]))),64)),T("div",cn,[Pt(Hr,{onClick:c[1]||(c[1]=w=>l("qrCode")),class:"qr",margin:0,logoSrc:K(e).logo,text:K(e).text,callback:s,logoMargin:10,whiteMargin:!1,correctLevel:2,colorDark:"#DAB550",colorLight:"transparent"},null,8,["logoSrc","text"]),T("div",{onClick:c[2]||(c[2]=w=>l("contact")),class:"w-full h-56px box-border bg-#8AB0E3 pl-15px py-9px"},[T("img",{class:"contact-icon",src:K(at)("pc/detail-contact.png")},null,8,un)])])]),T("div",fn,[T("img",{onClick:c[3]||(c[3]=w=>n.value=!0),src:K(at)("pc/tool-qp1.png")},null,8,hn),c[9]||(c[9]=T("iframe",{class:"w-full h-full",src:"https://www.jgqxw.com/index/tour/show/vid/d1ac00f0496a93af"},null,-1))])])]),Pt(h,{width:K(r).width,height:K(r).height,title:K(r).title,show:K(r).show,"onUpdate:show":c[4]||(c[4]=w=>K(r).show=w)},{dialogContent:Me(()=>[K(r).type==="contact"?(it(),ct("div",dn,[T("div",gn,[T("img",{class:"w-28px h-48px mr-17px",src:K(at)("pc/contact-icon.png")},null,8,pn),c[10]||(c[10]=Oe("联系我们 "))]),(it(),ct(Ct,null,Bt(2,w=>T("div",{class:"flex items-start mb-54px",key:w},[T("img",{class:"w-41px h-57px mt-10px mr-16px",src:K(at)("pc/contact-icon1.png")},null,8,mn),c[11]||(c[11]=T("div",{class:"text-#405D80 simli text-48px leading-60px"},[T("p",{class:"text-bg"},"汉寿县高新技术产业园"),T("p",null,"李晓赞:18817083532")],-1))])),64))])):(it(),ct("img",{key:1,class:"dialog-img",src:K(r).imgUrl},null,8,vn))]),_:1},8,["width","height","title","show"])]),Pt(v,{"page-url":K(i),show:K(n),"onUpdate:show":c[5]||(c[5]=w=>Fe(n)?n.value=w:null)},null,8,["page-url","show"])],64)}}});const An=de(bn,[["__scopeId","data-v-78959908"]]);export{An as default};
