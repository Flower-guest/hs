import{$ as he,d as F,y as m,a0 as Y,a1 as ft,a2 as pt,a3 as mt,D as Le,r as w,a4 as vt,b as K,C as gt,a5 as ht,w as ne,n as fe,o as _e,a6 as ze,a7 as Ee,x as Ae,H as me,a8 as _t,a9 as xt,aa as bt,X as yt,V as wt,ab as kt,ac as Ct,ad as Re,a as y,c as $,q as X,m as v,u as r,J as le,K as se,I as ie,_ as ae,F as q,G as Z,p as xe,k as ce,A as z,j as ve,l as He,B as Ue,z as St}from"./index-96dfca79.js";import{c as be,m as ee,n as J,d as qe,u as te,r as It,f as $t,I as re,w as ye,h as Tt,i as Lt,j as Je,F as Vt,k as ge,l as We,p as At,q as ke,v as Pt,L as Bt,x as Dt,y as Mt,g as H,P as Ye,z as Et,t as pe,A as Ve,B as Ce,C as Rt,e as Oe}from"./index-edda338e.js";import{u as Ke,T as Ot,a as Ft}from"./index-08d8faeb.js";import{_ as Nt,a as jt}from"./ContactButton.vue_vue_type_script_setup_true_lang-b084dfbd.js";import{s as Ze,M as zt,c as Se}from"./index-affb87f3.js";import{l as Ge,g as Ht,s as Ut,c as qt,I as Xe,a as Jt,r as Wt,b as Yt}from"./AppArouse-bbced426.js";import{u as Kt}from"./index-4e545953.js";import"./shared.esm-bundler-b0cb2000.js";const[Zt,oe]=be("cell"),Qe={tag:ee("div"),icon:String,size:String,title:J,value:J,label:J,center:Boolean,isLink:Boolean,border:qe,required:Boolean,iconPrefix:String,valueClass:te,labelClass:te,titleClass:te,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Gt=he({},Qe,It);var Xt=F({name:Zt,props:Gt,setup(e,{slots:a}){const n=$t(),i=()=>{if(a.label||Y(e.label))return m("div",{class:[oe("label"),e.labelClass]},[a.label?a.label():e.label])},o=()=>{var s;if(a.title||Y(e.title)){const p=(s=a.title)==null?void 0:s.call(a);return Array.isArray(p)&&p.length===0?void 0:m("div",{class:[oe("title"),e.titleClass],style:e.titleStyle},[p||m("span",null,[e.title]),i()])}},l=()=>{const s=a.value||a.default;if(s||Y(e.value))return m("div",{class:[oe("value"),e.valueClass]},[s?s():m("span",null,[e.value])])},u=()=>{if(a.icon)return a.icon();if(e.icon)return m(re,{name:e.icon,class:oe("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(a["right-icon"])return a["right-icon"]();if(e.isLink){const s=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return m(re,{name:s,class:oe("right-icon")},null)}};return()=>{var s;const{tag:p,size:c,center:h,border:k,isLink:_,required:x}=e,T=(s=e.clickable)!=null?s:_,P={center:h,required:x,clickable:T,borderless:!k};return c&&(P[c]=!!c),m(p,{class:oe(P),role:T?"button":void 0,tabindex:T?0:void 0,onClick:n},{default:()=>{var A;return[u(),o(),l(),f(),(A=a.extra)==null?void 0:A.call(a)]}})}}});const Qt=ye(Xt);function et(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function en(e,a){if(et(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function tn(e,a){return new Promise(n=>{const i=a.validator(e,a);if(ft(i)){i.then(n);return}n(i)})}function Fe(e,a){const{message:n}=a;return pt(n)?n(e,a):n||""}function nn({target:e}){e.composing=!0}function Ne({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function an(e,a){const n=Tt();e.style.height="auto";let i=e.scrollHeight;if(mt(a)){const{maxHeight:o,minHeight:l}=a;o!==void 0&&(i=Math.min(i,o)),l!==void 0&&(i=Math.max(i,l))}i&&(e.style.height=`${i}px`,Lt(n))}function on(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function W(e){return[...e].length}function Ie(e,a){return[...e].slice(0,a).join("")}const[ln,j]=be("field"),Pe={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:J,formatter:Function,clearIcon:ee("clear"),modelValue:Je(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:ee("focus"),formatTrigger:ee("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},sn=he({},Qe,Pe,{rows:J,type:ee("text"),rules:Array,autosize:[Boolean,Object],labelWidth:J,labelClass:te,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var cn=F({name:ln,props:sn,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:n}){const i=Ke(),o=Le({status:"unvalidated",focused:!1,validateMessage:""}),l=w(),u=w(),f=w(),{parent:s}=vt(Vt),p=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(Y(e[t]))return e[t];if(s&&Y(s.props[t]))return s.props[t]},h=K(()=>{const t=c("readonly");if(e.clearable&&!t){const I=p()!=="",C=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return I&&C}return!1}),k=K(()=>f.value&&n.input?f.value():e.modelValue),_=t=>t.reduce((I,C)=>I.then(()=>{if(o.status==="failed")return;let{value:B}=k;if(C.formatter&&(B=C.formatter(B,C)),!en(B,C)){o.status="failed",o.validateMessage=Fe(B,C);return}if(C.validator)return et(B)&&C.validateEmpty===!1?void 0:tn(B,C).then(E=>{E&&typeof E=="string"?(o.status="failed",o.validateMessage=E):E===!1&&(o.status="failed",o.validateMessage=Fe(B,C))})}),Promise.resolve()),x=()=>{o.status="unvalidated",o.validateMessage=""},T=()=>a("endValidate",{status:o.status,message:o.validateMessage}),P=(t=e.rules)=>new Promise(I=>{x(),t?(a("startValidate"),_(t).then(()=>{o.status==="failed"?(I({name:e.name,message:o.validateMessage}),T()):(o.status="passed",I(),T())})):I()}),A=t=>{if(s&&e.rules){const{validateTrigger:I}=s.props,C=Ee(I).includes(t),B=e.rules.filter(E=>E.trigger?Ee(E.trigger).includes(t):C);B.length&&P(B)}},D=t=>{var I;const{maxlength:C}=e;if(Y(C)&&W(t)>+C){const B=p();if(B&&W(B)===+C)return B;const E=(I=l.value)==null?void 0:I.selectionEnd;if(o.focused&&E){const O=[...t],U=O.length-+C;return O.splice(E-U,U),O.join("")}return Ie(t,+C)}return t},L=(t,I="onChange")=>{const C=t;t=D(t);const B=W(C)-W(t);if(e.type==="number"||e.type==="digit"){const O=e.type==="number";t=At(t,O,O)}let E=0;if(e.formatter&&I===e.formatTrigger){const{formatter:O,maxlength:U}=e;if(t=O(t),Y(U)&&W(t)>+U&&(t=Ie(t,+U)),l.value&&o.focused){const{selectionEnd:we}=l.value,Me=Ie(C,we);E=W(O(Me))-W(Me)}}if(l.value&&l.value.value!==t)if(o.focused){let{selectionStart:O,selectionEnd:U}=l.value;if(l.value.value=t,Y(O)&&Y(U)){const we=W(t);B?(O-=B,U-=B):E&&(O+=E,U+=E),l.value.setSelectionRange(Math.min(O,we),Math.min(U,we))}}else l.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},Q=t=>{t.target.composing||L(t.target.value)},d=()=>{var t;return(t=l.value)==null?void 0:t.blur()},S=()=>{var t;return(t=l.value)==null?void 0:t.focus()},R=()=>{const t=l.value;e.type==="textarea"&&e.autosize&&t&&an(t,e.autosize)},b=t=>{o.focused=!0,a("focus",t),fe(R),c("readonly")&&d()},V=t=>{o.focused=!1,L(p(),"onBlur"),a("blur",t),!c("readonly")&&(A("onBlur"),fe(R),Pt())},M=t=>a("clickInput",t),g=t=>a("clickLeftIcon",t),N=t=>a("clickRightIcon",t),ue=t=>{ke(t),a("update:modelValue",""),a("clear",t)},Be=K(()=>{if(typeof e.error=="boolean")return e.error;if(s&&s.props.showError&&o.status==="failed")return!0}),nt=K(()=>{const t=c("labelWidth"),I=c("labelAlign");if(t&&I!=="top")return{width:ge(t)}}),at=t=>{t.keyCode===13&&(!(s&&s.props.submitOnEnter)&&e.type!=="textarea"&&ke(t),e.type==="search"&&d()),a("keypress",t)},De=()=>e.id||`${i}-input`,ot=()=>o.status,lt=()=>{const t=j("control",[c("inputAlign"),{error:Be.value,custom:!!n.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(n.input)return m("div",{class:t,onClick:M},[n.input()]);const I={id:De(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${i}-label`:void 0,onBlur:V,onFocus:b,onInput:Q,onClick:M,onChange:Ne,onKeypress:at,onCompositionend:Ne,onCompositionstart:nn};return e.type==="textarea"?m("textarea",I,null):m("input",Ae(on(e.type),I),null)},st=()=>{const t=n["left-icon"];if(e.leftIcon||t)return m("div",{class:j("left-icon"),onClick:g},[t?t():m(re,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},it=()=>{const t=n["right-icon"];if(e.rightIcon||t)return m("div",{class:j("right-icon"),onClick:N},[t?t():m(re,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ct=()=>{if(e.showWordLimit&&e.maxlength){const t=W(p());return m("div",{class:j("word-limit")},[m("span",{class:j("word-num")},[t]),me("/"),e.maxlength])}},rt=()=>{if(s&&s.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const I=n["error-message"],C=c("errorMessageAlign");return m("div",{class:j("error-message",C)},[I?I({message:t}):t])}},ut=()=>{const t=c("labelWidth"),I=c("labelAlign"),C=c("colon")?":":"";if(n.label)return[n.label(),C];if(e.label)return m("label",{id:`${i}-label`,for:n.input?void 0:De(),onClick:B=>{ke(B),S()},style:I==="top"&&t?{width:ge(t)}:void 0},[e.label+C])},dt=()=>[m("div",{class:j("body")},[lt(),h.value&&m(re,{ref:u,name:e.clearIcon,class:j("clear")},null),it(),n.button&&m("div",{class:j("button")},[n.button()])]),ct(),rt()];return We({blur:d,focus:S,validate:P,formValue:k,resetValidation:x,getValidationStatus:ot}),gt(ht,{customValue:f,resetValidation:x,validateWithTrigger:A}),ne(()=>e.modelValue,()=>{L(p()),x(),A("onChange"),fe(R)}),_e(()=>{L(p(),e.formatTrigger),fe(R)}),ze("touchstart",ue,{target:K(()=>{var t;return(t=u.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),I=c("labelAlign"),C=st(),B=()=>{const E=ut();return I==="top"?[C,E].filter(Boolean):E||[]};return m(Qt,{size:e.size,class:j({error:Be.value,disabled:t,[`label-${I}`]:I}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:nt.value,valueClass:j("value"),titleClass:[j("label",[I,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:C&&I!=="top"?()=>C:null,title:B,value:dt,extra:n.extra})}}});const rn=ye(cn),[un,$e]=be("switch"),dn={size:J,loading:Boolean,disabled:Boolean,modelValue:te,activeColor:String,inactiveColor:String,activeValue:{type:te,default:!0},inactiveValue:{type:te,default:!1}};var fn=F({name:un,props:dn,emits:["change","update:modelValue"],setup(e,{emit:a,slots:n}){const i=()=>e.modelValue===e.activeValue,o=()=>{if(!e.disabled&&!e.loading){const u=i()?e.inactiveValue:e.activeValue;a("update:modelValue",u),a("change",u)}},l=()=>{if(e.loading){const u=i()?e.activeColor:e.inactiveColor;return m(Bt,{class:$e("loading"),color:u},null)}if(n.node)return n.node()};return _t(()=>e.modelValue),()=>{var u;const{size:f,loading:s,disabled:p,activeColor:c,inactiveColor:h}=e,k=i(),_={fontSize:ge(f),backgroundColor:k?c:h};return m("div",{role:"switch",class:$e({on:k,loading:s,disabled:p}),style:_,tabindex:p?void 0:0,"aria-checked":k,onClick:o},[m("div",{class:$e("node")},[l()]),(u=n.background)==null?void 0:u.call(n)])}}});const pn=ye(fn),[mn,Te]=be("back-top"),vn={right:J,bottom:J,zIndex:J,target:[String,Object],offset:Je(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var gn=F({name:mn,inheritAttrs:!1,props:vn,emits:["click"],setup(e,{emit:a,slots:n,attrs:i}){let o=!1;const l=w(!1),u=w(),f=w(),s=K(()=>he(Dt(e.zIndex),{right:ge(e.right),bottom:ge(e.bottom)})),p=_=>{var x;a("click",_),(x=f.value)==null||x.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},c=()=>{l.value=f.value?Mt(f.value)>=+e.offset:!1},h=()=>{const{target:_}=e;if(typeof _=="string"){const x=document.querySelector(_);if(x)return x}else return _},k=()=>{kt&&fe(()=>{f.value=e.target?h():Ct(u.value),c()})};return ze("scroll",xt(c,100),{target:f}),_e(k),bt(()=>{o&&(l.value=!0,o=!1)}),yt(()=>{l.value&&e.teleport&&(l.value=!1,o=!0)}),ne(()=>e.target,k),()=>{const _=m("div",Ae({ref:e.teleport?void 0:u,class:Te({active:l.value}),style:s.value,onClick:p},i),[n.default?n.default():m(re,{name:"back-top",class:Te("icon")},null)]);return e.teleport?[m("div",{ref:u,class:Te("placeholder")},null),m(wt,{to:e.teleport},{default:()=>[_]})]:_}}});const hn=ye(gn),[_n,de,xn]=be("search"),bn=he({},Pe,{label:String,shape:ee("square"),leftIcon:ee("search"),clearable:qe,actionText:String,background:String,showAction:Boolean});var yn=F({name:_n,props:bn,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:n,attrs:i}){const o=Ke(),l=w(),u=()=>{n.action||(a("update:modelValue",""),a("cancel"))},f=d=>{d.keyCode===13&&(ke(d),a("search",e.modelValue))},s=()=>e.id||`${o}-input`,p=()=>{if(n.label||e.label)return m("label",{class:de("label"),for:s()},[n.label?n.label():e.label])},c=()=>{if(e.showAction){const d=e.actionText||xn("cancel");return m("div",{class:de("action"),role:"button",tabindex:0,onClick:u},[n.action?n.action():d])}},h=()=>{var d;return(d=l.value)==null?void 0:d.blur()},k=()=>{var d;return(d=l.value)==null?void 0:d.focus()},_=d=>a("blur",d),x=d=>a("focus",d),T=d=>a("clear",d),P=d=>a("clickInput",d),A=d=>a("clickLeftIcon",d),D=d=>a("clickRightIcon",d),L=Object.keys(Pe),Q=()=>{const d=he({},i,Re(e,L),{id:s()}),S=R=>a("update:modelValue",R);return m(rn,Ae({ref:l,type:"search",class:de("field"),border:!1,onBlur:_,onFocus:x,onClear:T,onKeypress:f,onClickInput:P,onClickLeftIcon:A,onClickRightIcon:D,"onUpdate:modelValue":S},d),Re(n,["left-icon","right-icon"]))};return We({focus:k,blur:h}),()=>{var d;return m("div",{class:de({"show-action":e.showAction}),style:{background:e.background}},[(d=n.left)==null?void 0:d.call(n),m("div",{class:de("content",e.shape)},[p(),Q()]),c()])}}});const wn=ye(yn);const kn=["src"],Cn=F({__name:"Search",emits:["search","focus","clear"],setup(e,{emit:a}){const n=w(),i=w(!1),o=a,l=()=>o("search",n.value),u=()=>{i.value=!0,o("focus")},f=()=>{n.value=null,o("clear")};return(s,p)=>{const c=wn;return y(),$("div",null,[m(c,{class:"search",modelValue:r(n),"onUpdate:modelValue":[p[0]||(p[0]=h=>ie(n)?n.value=h:null),l],placeholder:"请输入搜索关键词",onSearch:l,onFocus:u},{"left-icon":X(()=>[v("img",{class:"w-48px h-48px",src:r(H)("icon-search.png")},null,8,kn)]),"right-icon":X(()=>[le(v("div",{class:"text-#029AA7 text-30px",onClick:f}," 取消 ",512),[[se,r(i)]])]),_:1},8,["modelValue"])])}}});const Sn=ae(Cn,[["__scopeId","data-v-37cb3a94"]]),In={class:"bg-#fff"},$n={class:"flex justify-between items-center border-t-1px border-#ddd px-68px py-18px"},Tn=["onClick"],Ln={key:0,class:"flex flex-col ml-8px"},Vn=["onClick","src"],An=F({__name:"classification",props:{markerType:{}},emits:["typeClick"],setup(e,{emit:a}){const n=e,i=w(0),o=w("zh"),l=w(""),u=w([{label:"综合",val:"zh"},{label:"更新时间",val:"gxsj"},{label:"金额",val:"je",list:[{img:"icon-je-up.png",imgActive:"icon-je-up-active.png",val:"up",fVal:"je"},{img:"icon-je-down.png",imgActive:"icon-je-down-active.png",val:"down",fVal:"je"}]}]),f=a,s=async({name:c})=>{const h=n.markerType.filter(k=>k.id==c)[0];f("typeClick",h)},p=c=>{c.val=="je"||c!=null&&c.fVal?(o.value=(c==null?void 0:c.fVal)??c.val,c.val=="je"?l.value=l.value=="up"?"down":"up":l.value=c.val):(l.value="",o.value=c.val)};return(c,h)=>{const k=Ft,_=Ot;return y(),$("div",In,[m(_,{class:"tabs",active:r(i),"onUpdate:active":h[0]||(h[0]=x=>ie(i)?i.value=x:null),"title-active-color":"#029AA7","title-inactive-color":"#888",onClickTab:s},{default:X(()=>[(y(!0),$(q,null,Z(n.markerType,x=>(y(),xe(k,{name:x.id,title:x.name,key:x.name},null,8,["name","title"]))),128))]),_:1},8,["active"]),v("div",$n,[(y(!0),$(q,null,Z(r(u),x=>(y(),$("div",{class:"flex items-center",key:x.label},[v("span",{onClick:T=>p(x),class:ce(["text-24px",[r(o)==x.val?"text-#029AA7":"text-#888"]])},z(x.label),11,Tn),x.val=="je"?(y(),$("div",Ln,[(y(!0),$(q,null,Z(x.list,T=>(y(),$("img",{key:T.val,onClick:P=>p(T),class:"w-20px h-12px mb-4px",src:r(H)(r(l)==T.val?T.imgActive:T.img)},null,8,Vn))),128))])):ve("",!0)]))),128))])])}}});const Pn=ae(An,[["__scopeId","data-v-4b23a777"]]),Bn={class:"px-36px py-21px text-36px"},Dn=F({__name:"Popups",props:{position:{default:"bottom"},height:{default:"20%"},closeable:{type:Boolean,default:!0},round:{type:Boolean,default:!0},close:{type:Boolean,default:!1},lock:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},title:{default:"标题"},showPopup:{type:Boolean,default:!1}},emits:["update:showPopup"],setup(e,{emit:a}){const n=e,i=w(!1);ne(()=>n.showPopup,u=>{i.value=u});const o=a,l=()=>{o("update:showPopup",!1)};return(u,f)=>{const s=Ye;return y(),xe(s,{class:"popups",show:r(i),"onUpdate:show":f[0]||(f[0]=p=>ie(i)?i.value=p:null),position:n.position,closeable:n.closeable,round:n.round,"lock-scroll":n.lock,overlay:n.overlay,"close-on-click-overlay":n.close,style:Ue({height:n.height}),onClickCloseIcon:l},{default:X(()=>[v("div",Bn,z(n.title),1),f[1]||(f[1]=v("div",{class:"line"},null,-1)),He(u.$slots,"default",{},void 0,!0)]),_:3},8,["show","position","closeable","round","lock-scroll","overlay","close-on-click-overlay","style"])}}});const Mn=ae(Dn,[["__scopeId","data-v-0f459506"]]);const En={class:"sht"},Rn={class:"tool-bar"},On={class:"tools"},Fn=["onClick"],Nn={key:0,class:"tjlx"},jn=["onClick"],zn={class:"flex items-center py-36px"},Hn=["src"],Un={class:"flex flex-col flex-1 overflow-hidden"},qn={class:"text-#353535 text-30px"},Jn={class:"w-100% text-#888 text-26px mt-px ellipsis"},Wn={key:0,class:"line"},Yn={key:1,class:"flex justify-between mt-32px px-36px"},Kn=["onClick"],Zn=["src"],Gn={class:"mt-21px"},Xn=F({__name:"toolBar",emits:["showFooter","lineRoad"],setup(e,{expose:a,emit:n}){const i=w(!1),o=Le({height:0,title:"",type:""}),l=w(),u=w(!1),f=w(!0),s=Le({fg:"vector",lx:null}),p=w(!1),c=w([{label:"推荐线路",val:"tjlx",list:[]},{label:"图层风格",val:"tcfg",list:[{img:"img-pm.png",label:"平面地图",val:"vector"},{img:"img-wx.png",label:"卫星地图",val:"satellite"},{img:"img-qj.png",label:"全景地图",val:"vr",vrUrl:""}]},{label:"乡村简介",val:"xcjj"},{label:"分享页面",val:"fxym"}]);let h=Ge.getCache("ruralInfo");const k=async()=>{const d=await Ht();c.value[0].list=d,c.value[1].list[2].vrUrl=h.vrUrl},_=d=>{if(i.value=!1,d.val=="fxym")p.value=!0;else if(d.val=="xcjj")pe("ruralInfo");else switch(u.value=!0,o.type=d.val,o.title=d.label,l.value=d.list,d.val){case"tjlx":o.height="200px";break;default:o.height="168px"}},x=d=>{s.fg=d.val,d.val=="vr"?pe("webView",d.vrUrl,!0):window.map.setBaseMap({type:d.val})},T=n;let P,A={};const D=async d=>{Ze(window.mapPlugins),Object.keys(A).length===0&&(A.marker=new zt(window.map,{markerLayerId:"marker-line"})),Ut({message:"加载中...",forbidClick:!0,loadingType:"spinner"}),P&&await L(P,A),P=d.spot,s.lx=s.lx===d.id?null:d.id,s.lx&&await Q(d,A),Ce(A,S=>T("lineRoad",S)),qt()},L=async(d,S)=>{for(const R of d)await S.marker.remove(R.id)},Q=async(d,S)=>{const R=[];for(const b of d.spot)await S.marker.update({...b,needName:"false",icon:Ve(b.icon),latitude:b.latitude,longitude:b.longitude}),R.push({lat:b.latitude,lng:b.longitude});Rt(window.map,R)};return ne([u,p],d=>{const S=!!(d[0]||d[1]);!d[0]&&P&&(L(P,A),s.lx=null),T("showFooter",S,o.type)}),_e(async()=>{await k()}),a({showPopup:u}),(d,S)=>{const R=pn,b=Xe,V=Mn,M=Nt;return y(),$(q,null,[v("div",En,[m(R,{modelValue:r(f),"onUpdate:modelValue":S[0]||(S[0]=g=>ie(f)?f.value=g:null),onClick:S[1]||(S[1]=g=>r(Et)(r(f))),"active-color":"#029AA7","inactive-color":"#B2B2B2"},null,8,["modelValue"]),S[6]||(S[6]=v("span",{class:"mt-4px"},"手绘地图",-1))]),m(b,{class:"panorama",onClick:S[2]||(S[2]=g=>r(pe)("webView",r(h).vrUrl,!0)),src:r(H)("icon_vr.png"),"lazy-load":""},null,8,["src"]),v("div",Rn,[le(v("div",On,[(y(!0),$(q,null,Z(r(c),(g,N)=>(y(),$("span",{onClick:ue=>_(g),class:ce(["text-32px text-#fff",{"mb-41px":N<r(c).length-1}]),key:g.label},z(g.label),11,Fn))),128))],512),[[se,r(i)]]),m(b,{onClick:S[3]||(S[3]=g=>i.value=!r(i)),class:"w-80px h-80px",src:r(H)("icon-tool.png"),"lazy-load":""},null,8,["src"]),r(o).type!=="fxym"?(y(),xe(V,{key:0,height:r(o).height,title:r(o).title,lock:!1,overlay:!1,"show-popup":r(u),"onUpdate:showPopup":S[4]||(S[4]=g=>ie(u)?u.value=g:null)},{default:X(()=>[r(o).type=="tjlx"?(y(),$("div",Nn,[(y(!0),$(q,null,Z(r(l),(g,N)=>(y(),$("div",{class:ce(["px-33px",{"lx-active":r(s).lx==g.id}]),onClick:ue=>D(g),key:g.id},[v("div",zn,[v("img",{class:"w-84px h-84px mr-16px",src:r(Ve)(g.images)},null,8,Hn),v("div",Un,[v("span",qn,z(g.name),1),v("span",Jn,z(g.content),1)])]),N<r(l).length-1?(y(),$("div",Wn)):ve("",!0)],10,jn))),128))])):(y(),$("div",Yn,[(y(!0),$(q,null,Z(r(l),g=>(y(),$("div",{key:g.label,onClick:N=>x(g),class:ce([{tcfg:r(s).fg===g.val},"popup-text"])},[v("img",{class:"w-196px h-108px",src:r(H)(g.img)},null,8,Zn),v("span",Gn,z(g.label),1)],10,Kn))),128))]))]),_:1},8,["height","title","show-popup"])):ve("",!0)]),m(M,{"show-share":r(p),"onUpdate:showShare":S[5]||(S[5]=g=>ie(p)?p.value=g:null)},null,8,["show-share"])],64)}}});const Qn=ae(Xn,[["__scopeId","data-v-db0ee382"]]),ea={class:"relative rounded-4px overflow-hidden"},ta=["src"],na={class:"flex-1 flex flex-col justify-between ml-20px text-24px"},aa={class:"text-38px"},oa={key:1,class:"invisible text-[#029AA7] bg-[#DDF6F8] px-8px py-4px mr-8px"},la={class:"text-20px mt-9px mb-5px text-[#30F230]"},sa={class:"text-26px"},ia={class:"text-[#888]"},tt=F({__name:"infoList",props:{info:{}},emits:["toDetail"],setup(e,{emit:a}){const n=e,i=K(()=>{var f;return!((f=n.info)!=null&&f.businessStatus&&n.info.businessStatus=="1")}),o=K(()=>{var f;return(f=n.info)!=null&&f.tag?JSON.parse(n.info.tag):[]}),l=a,u=()=>{l("toDetail",n.info)};return(f,s)=>{var c,h,k,_,x,T;const p=Xe;return y(),$("div",{class:ce(["flex w-100%",[(c=n.info)!=null&&c.h?n.info.h:""]]),onClick:s[1]||(s[1]=P=>u())},[v("div",ea,[v("div",{class:ce([[r(i)?"bg-#029AA7":"bg-#888"],"absolute left-0 top-0 z-1 w-100px py-4px text-center text-#fff text-24px rounded-tl-4px rounded-br-4px"])},z(r(i)?"营业中":"歇业中"),3),m(p,{class:"w-228px",height:n.info.imgH,fit:"cover",src:r(Ve)((h=n.info)==null?void 0:h.thumb)??r(H)("editSrc.png"),"lazy-load":""},null,8,["height","src"]),(k=n.info)!=null&&k.vrimage?(y(),$("img",{key:0,onClick:s[0]||(s[0]=St(P=>r(pe)("webView",n.info.vrimage,!0),["stop"])),class:"absolute right-12px bottom-12px z-1 w-40px h-40px",src:r(H)("icon-vr.png")},null,8,ta)):ve("",!0)]),v("div",na,[v("div",aa,z(((_=n.info)==null?void 0:_.name)??""),1),v("div",null,[r(o).length>0?(y(!0),$(q,{key:0},Z(r(o).slice(0,3),P=>(y(),$("span",{key:P,class:"text-[#029AA7] bg-[#DDF6F8] px-8px py-4px mr-8px"},z(P),1))),128)):(y(),$("span",oa,"问问"))]),v("div",la,[s[2]||(s[2]=me(" ￥")),v("span",sa,z(((x=n.info)==null?void 0:x.price)??"600"),1),s[3]||(s[3]=me("/晚 "))]),v("div",ia,z(((T=n.info)==null?void 0:T.lcposition)??""),1)])],2)}}}),ca={class:"py-20px px-30px box-border"},ra=F({__name:"detailInfo",props:{showInfo:{type:Boolean},detailInfo:{}},emits:["update:showInfo"],setup(e,{emit:a}){const n=e,i=w();ne(()=>n.detailInfo,f=>{o(f.id)});const o=async f=>{const s=await Jt(f);i.value=s},l=a,u=()=>l("update:showInfo",!1);return(f,s)=>{const p=jt,c=Ye;return y(),xe(c,{show:f.showInfo,closeable:"","close-icon":"close",round:"",position:"bottom",class:"min-h-max",onClickOverlay:u,onClickCloseIcon:u},{default:X(()=>[v("div",ca,[m(tt,{info:{...r(i),h:"h-181px",imgH:"100px"},onToDetail:s[0]||(s[0]=h=>r(pe)("detail",h.id))},null,8,["info"]),m(p,{info:{...r(i),cla:"mt-34px"}},null,8,["info"])])]),_:1},8,["show"])}}});const ua=ae(ra,[["__scopeId","data-v-6c00acfc"]]),da={class:"popup-top"},fa=["src"],je="overflow-hidden",pa=F({__name:"FloatingPanel",props:{maxHeight:{default:98},firstHeight:{default:50},minHeight:{default:8},isNeedTwo:{type:Boolean,default:!0}},emits:["change","handleScroll"],setup(e,{expose:a,emit:n}){const i=e;let o=0,l=0;const u=w(i.minHeight),f=w(null),s=w(0),p=w(!1),c=n,h=K(()=>({height:u.value==i.maxHeight?"calc(100% - 120px)":u.value+"%",overflowY:u.value>50?"auto":"hidden"})),k=D=>{p.value=!0,o=D.touches[0].clientY},_=D=>{if(s.value!==0)return;p.value=!1;const L=D.changedTouches[0].clientY-o;Math.abs(L)<5||(i.isNeedTwo?L<0?l==0?(l=1,u.value=i.firstHeight):(l=2,u.value=i.maxHeight):l==2&&L>20&&L<200?(l=1,u.value=i.firstHeight):(l==2&&L>200||l==1&&L>5)&&(l=0,u.value=i.minHeight):u.value=L<0?i.maxHeight:i.minHeight,o=0,c("change",u.value))},x=()=>{u.value=i.minHeight,s.value=0,l=0,c("change",u.value)},T=()=>{var D,L;s.value=(D=f.value)!=null&&D.scrollTop&&((L=f.value)==null?void 0:L.scrollTop)>0?f.value.scrollTop:0,c("handleScroll",s.value)};_e(()=>{window.addEventListener("scroll",T,!0)});const P=()=>{document.body.classList.add(je)},A=()=>{document.body.classList.remove(je)};return ne(p,D=>{D?P():A()}),a({hideDialog:x}),(D,L)=>(y(),$("div",{ref_key:"popup",ref:f,class:"popup",style:Ue([r(h)]),onTouchstart:k,onTouchend:_},[v("div",da,[v("img",{class:"w-64px h-18px",src:r(H)(r(u)==i.maxHeight?"icon-xh.png":"icon-sh.png")},null,8,fa)]),L[0]||(L[0]=v("div",{class:"w-100% h-1px mb-15px bg-[#ddd]"},null,-1)),He(D.$slots,"default",{},void 0,!0)],36))}});const ma=ae(pa,[["__scopeId","data-v-bcccb6c4"]]);const va={class:"px-28px"},ga={key:0,class:"container bg-#fff rounded-10px"},ha=["src"],_a={key:1,class:"text-center text-[#ddd]"},xa=F({__name:"floatFooter",props:{markerData:{}},emits:["toDetail"],setup(e,{emit:a}){const n=e,i=w();ne(()=>n.markerData,u=>{i.value=u});const o=a,l=u=>{o("toDetail",u)};return(u,f)=>{const s=hn,p=ma;return y(),xe(p,{"min-height":20,"max-height":79,"is-need-two":!1},{default:X(()=>{var c;return[v("div",va,[((c=r(i))==null?void 0:c.length)>0?(y(),$("div",ga,[(y(!0),$(q,null,Z(r(i),h=>(y(),$("div",{key:h.id},[m(tt,{info:{...h,h:"h-172px",imgH:"100%"},onToDetail:l},null,8,["info"]),f[0]||(f[0]=v("div",{class:"my-20px h-2px w-full bg-[#ddd]"},null,-1))]))),128)),m(s,{target:".popup",right:"40px",bottom:"128px","z-index":"2002",style:{"background-color":"transparent"}},{default:X(()=>[v("img",{class:"w-84px h-84px",src:r(H)("back-top.png")},null,8,ha)]),_:1})])):(y(),$("div",_a,"暂无数据"))])]}),_:1})}}});const ba=ae(xa,[["__scopeId","data-v-f30f1191"]]),G=window.TMap,ya=e=>{window.document.title=e.name;const a=new G.Map("container",{zoom:(e==null?void 0:e.mapZoom)??17,center:new G.LatLng(JSON.parse(e.mapCenter)[0],JSON.parse(e.mapCenter)[1]),renderOptions:{enableBloom:!0},baseMap:{type:"vector",features:["base","point","label","arrow"]},viewMode:"2D"}),n={}.VITE_BASE_LAUNCH_URL+e.layerUrl,i=new G.LatLng(JSON.parse(e.imageSW)[0],JSON.parse(e.imageSW)[1]),o=new G.LatLng(JSON.parse(e.imageNE)[0],JSON.parse(e.imageNE)[1]),l=new G.LatLngBounds(i,o),u=new G.ImageGroundLayer({bounds:l,src:n,map:a});return window.imageGroundLayer=u,wa(a),{map:a}},wa=e=>{e.removeControl(G.constants.DEFAULT_CONTROL_ID.ZOOM),e.removeControl(G.constants.DEFAULT_CONTROL_ID.ROTATION)},ka={class:"w-screen h-screen overflow-hidden"},Ca={class:"search-result"},Sa=["onClick"],Ia={class:"px-16px pt-32px"},$a={class:"flex justify-between"},Ta={class:"font-extrabold text-30px text-#353535 flex items-center"},La=["src"],Va={class:"text-20px text-#888 flex flex-col justify-center items-center"},Aa=["src"],Pa=["src"],ja=F({__name:"index",setup(e){const a=w(),n=w(),i=w(!1),o=w(!0),l=w(!0),u=w(!1),f=w([]),s=w(null),p=w(),c=w([{name:"全部",id:0}]);let h,k,_;const x=async()=>{_=Ge.getCache("ruralInfo"),p.value=await d(),{map:h}=ya(_),window.map=h,window.mapPlugins=k=Se(h,p.value),h.on("click",()=>{o.value=!l.value,l.value=!l.value,n.value.showPopup=!1}),Ce(k,b=>A(b))},T=Kt(async b=>{f.value=b?p.value:[]},500),P=async b=>{p.value=b.id=="0"?await d():await S([{...b}]),Q()},A=b=>{var V,M,g,N;i.value=!0,o.value=!1,u.value=!1,s.value=(b==null?void 0:b.geometry)??b,Oe(h,_==null?void 0:_.markerZoom,[((M=(V=s.value)==null?void 0:V.position)==null?void 0:M.lat)??s.value.latitude,((N=(g=s.value)==null?void 0:g.position)==null?void 0:N.lng)??s.value.longitude])},D=()=>{Oe(h,_==null?void 0:_.mapZoom,[JSON.parse(_.mapCenter)[0],JSON.parse(_.mapCenter)[1]])},L=(b,V)=>{l.value&&(o.value=!b),!b&&V=="tjlx"&&(k=Se(h,p.value),Ce(k,M=>A(M)))},Q=()=>{Ze(k),k=Se(h,p.value),Ce(k,b=>A(b))},d=async()=>(c.value=[{name:"全部",id:0}],(await Wt()).filter(M=>{c.value.push({id:M.id,name:M.name,icon:M.icon})}),await S(c.value)),S=async b=>{const V=[];for(const g in b)V.push(Yt(b[g].id));const M=await Promise.all([...V]);return b.forEach((g,N)=>{M[N].filter(ue=>{ue.icon=(g==null?void 0:g.icon)??null})}),M.flat()},R=b=>{i.value=b,o.value=!1,l.value=!1};return _e(()=>{x()}),(b,V)=>{const M=Sn;return y(),$("div",ka,[le(v("div",null,[m(M,{onSearch:r(T),onFocus:V[0]||(V[0]=g=>u.value=!0),onClear:V[1]||(V[1]=g=>u.value=!1)},null,8,["onSearch"]),m(Pn,{ref_key:"topRef",ref:a,class:"classification","marker-type":r(c),onTypeClick:P},null,8,["marker-type"]),m(Qn,{ref_key:"refToolBar",ref:n,onLineRoad:A,onShowFooter:L},null,512)],512),[[se,r(l)]]),V[5]||(V[5]=v("div",{class:"w-screen h-screen",id:"container"},null,-1)),m(ua,{detailInfo:r(s),"show-info":r(i),"onUpdate:showInfo":R},null,8,["detailInfo","show-info"]),le(m(ba,{"marker-data":r(p),onToDetail:A},null,8,["marker-data"]),[[se,r(o)]]),le(v("div",Ca,[r(f).length>0?(y(!0),$(q,{key:0},Z(r(f),g=>(y(),$("div",{onClick:N=>A(g),key:g.id,class:"mb-10px"},[V[3]||(V[3]=v("div",{class:"text-30px text-#029AA7 mb-24px"},"景区",-1)),V[4]||(V[4]=v("div",{class:"line"},null,-1)),v("div",Ia,[v("div",$a,[v("div",Ta,[v("img",{class:"w-60px h-68px mr-21px",src:r(H)("cluster-bubble.png")},null,8,La),me(z(g.name),1)]),v("div",Va,[v("img",{class:"w-48px h-48px mb-8px",src:r(H)("icon-dzq.png")},null,8,Aa),V[2]||(V[2]=me("到这去 "))])])])],8,Sa))),128)):ve("",!0)],512),[[se,r(u)]]),le(v("img",{onClick:D,class:"location",src:r(H)("position.png")},null,8,Pa),[[se,!r(l)]])])}}});export{ja as default};
