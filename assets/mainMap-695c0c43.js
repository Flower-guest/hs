import{g as nt,a8 as ee,ar as j,aa as D,a9 as Pe,as as q,at as te,au as at,d as M,av as lt,y as u,aw as H,ax as K,ap as ne,ay as ot,az as st,aA as it,aB as rt,aC as ct,ab as Be,D as Re,r as B,aq as ut,aD as dt,c as N,aE as X,ae as Ee,C as ft,aF as gt,w as be,n as Q,o as ce,ak as Ae,aG as Se,aH as ht,an as se,x as ye,J as ie,aI as vt,aJ as mt,aK as _t,aL as bt,aM as yt,ai as pt,$ as kt,a3 as wt,aN as Ct,aO as xt,aP as St,aQ as $e,f as $,h as V,m as g,u as h,H as F,l as $t,B as It,_ as ae,q as Z,K as De,L as he,M as ve,aR as Vt,F as O,I as G,A,z as me,N as Me,E as re,j as oe,aS as Lt,R as _e,P as Tt,Q as Pt,aT as Bt,k as Rt,p as Et}from"./index-d8eb75d6.js";import{_ as At}from"./ContactButton-2ae2898a.js";import{_ as Dt}from"./Map.vue_vue_type_script_setup_true_lang-d992f39d.js";import{u as Mt}from"./index-a4fa81e0.js";let zt=0;function ze(){const e=nt(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++zt}`}const[Ht,Y]=ee("cell"),He={tag:j("div"),icon:String,size:String,title:D,value:D,label:D,center:Boolean,isLink:Boolean,border:Pe,required:Boolean,iconPrefix:String,valueClass:q,labelClass:q,titleClass:q,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},Ft=te({},He,at);var Nt=M({name:Ht,props:Ft,setup(e,{slots:n}){const s=lt(),a=()=>{if(n.label||H(e.label))return u("div",{class:[Y("label"),e.labelClass]},[n.label?n.label():e.label])},l=()=>{var r;if(n.title||H(e.title)){const d=(r=n.title)==null?void 0:r.call(n);return Array.isArray(d)&&d.length===0?void 0:u("div",{class:[Y("title"),e.titleClass],style:e.titleStyle},[d||u("span",null,[e.title]),a()])}},o=()=>{const r=n.value||n.default;if(r||H(e.value))return u("div",{class:[Y("value"),e.valueClass]},[r?r():u("span",null,[e.value])])},i=()=>{if(n.icon)return n.icon();if(e.icon)return u(K,{name:e.icon,class:Y("left-icon"),classPrefix:e.iconPrefix},null)},f=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const r=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return u(K,{name:r,class:Y("right-icon")},null)}};return()=>{var r;const{tag:d,size:c,center:C,border:p,isLink:y,required:k}=e,L=(r=e.clickable)!=null?r:y,b={center:C,required:k,clickable:L,borderless:!p};return c&&(b[c]=!!c),u(d,{class:Y(b),role:L?"button":void 0,tabindex:L?0:void 0,onClick:s},{default:()=>{var x;return[i(),l(),o(),f(),(x=n.extra)==null?void 0:x.call(n)]}})}}});const Ot=ne(Nt);function Fe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function jt(e,n){if(Fe(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function qt(e,n){return new Promise(s=>{const a=n.validator(e,n);if(it(a)){a.then(s);return}s(a)})}function Ie(e,n){const{message:s}=n;return rt(s)?s(e,n):s||""}function Wt({target:e}){e.composing=!0}function Ve({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Yt(e,n){const s=ot();e.style.height="auto";let a=e.scrollHeight;if(ct(n)){const{maxHeight:l,minHeight:o}=n;l!==void 0&&(a=Math.min(a,l)),o!==void 0&&(a=Math.max(a,o))}a&&(e.style.height=`${a}px`,st(s))}function Kt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function z(e){return[...e].length}function de(e,n){return[...e].slice(0,n).join("")}const[Ut,R]=ee("field"),pe={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:D,formatter:Function,clearIcon:j("clear"),modelValue:Be(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:j("focus"),formatTrigger:j("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Jt=te({},He,pe,{rows:D,type:j("text"),rules:Array,autosize:[Boolean,Object],labelWidth:D,labelClass:q,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Qt=M({name:Ut,props:Jt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:s}){const a=ze(),l=Re({status:"unvalidated",focused:!1,validateMessage:""}),o=B(),i=B(),f=B(),{parent:r}=ut(dt),d=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(H(e[t]))return e[t];if(r&&H(r.props[t]))return r.props[t]},C=N(()=>{const t=c("readonly");if(e.clearable&&!t){const _=d()!=="",v=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return _&&v}return!1}),p=N(()=>f.value&&s.input?f.value():e.modelValue),y=t=>t.reduce((_,v)=>_.then(()=>{if(l.status==="failed")return;let{value:w}=p;if(v.formatter&&(w=v.formatter(w,v)),!jt(w,v)){l.status="failed",l.validateMessage=Ie(w,v);return}if(v.validator)return Fe(w)&&v.validateEmpty===!1?void 0:qt(w,v).then(I=>{I&&typeof I=="string"?(l.status="failed",l.validateMessage=I):I===!1&&(l.status="failed",l.validateMessage=Ie(w,v))})}),Promise.resolve()),k=()=>{l.status="unvalidated",l.validateMessage=""},L=()=>n("endValidate",{status:l.status,message:l.validateMessage}),b=(t=e.rules)=>new Promise(_=>{k(),t?(n("startValidate"),y(t).then(()=>{l.status==="failed"?(_({name:e.name,message:l.validateMessage}),L()):(l.status="passed",_(),L())})):_()}),x=t=>{if(r&&e.rules){const{validateTrigger:_}=r.props,v=Se(_).includes(t),w=e.rules.filter(I=>I.trigger?Se(I.trigger).includes(t):v);w.length&&b(w)}},T=t=>{var _;const{maxlength:v}=e;if(H(v)&&z(t)>+v){const w=d();if(w&&z(w)===+v)return w;const I=(_=o.value)==null?void 0:_.selectionEnd;if(l.focused&&I){const P=[...t],E=P.length-+v;return P.splice(I-E,E),P.join("")}return de(t,+v)}return t},S=(t,_="onChange")=>{const v=t;t=T(t);const w=z(v)-z(t);if(e.type==="number"||e.type==="digit"){const P=e.type==="number";t=ht(t,P,P)}let I=0;if(e.formatter&&_===e.formatTrigger){const{formatter:P,maxlength:E}=e;if(t=P(t),H(E)&&z(t)>+E&&(t=de(t,+E)),o.value&&l.focused){const{selectionEnd:le}=o.value,xe=de(v,le);I=z(P(xe))-z(xe)}}if(o.value&&o.value.value!==t)if(l.focused){let{selectionStart:P,selectionEnd:E}=o.value;if(o.value.value=t,H(P)&&H(E)){const le=z(t);w?(P-=w,E-=w):I&&(P+=I,E+=I),o.value.setSelectionRange(Math.min(P,le),Math.min(E,le))}}else o.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},ue=t=>{t.target.composing||S(t.target.value)},m=()=>{var t;return(t=o.value)==null?void 0:t.blur()},U=()=>{var t;return(t=o.value)==null?void 0:t.focus()},W=()=>{const t=o.value;e.type==="textarea"&&e.autosize&&t&&Yt(t,e.autosize)},Ne=t=>{l.focused=!0,n("focus",t),Q(W),c("readonly")&&m()},Oe=t=>{l.focused=!1,S(d(),"onBlur"),n("blur",t),!c("readonly")&&(x("onBlur"),Q(W),vt())},ke=t=>n("clickInput",t),je=t=>n("clickLeftIcon",t),qe=t=>n("clickRightIcon",t),We=t=>{se(t),n("update:modelValue",""),n("clear",t)},we=N(()=>{if(typeof e.error=="boolean")return e.error;if(r&&r.props.showError&&l.status==="failed")return!0}),Ye=N(()=>{const t=c("labelWidth"),_=c("labelAlign");if(t&&_!=="top")return{width:X(t)}}),Ke=t=>{t.keyCode===13&&(!(r&&r.props.submitOnEnter)&&e.type!=="textarea"&&se(t),e.type==="search"&&m()),n("keypress",t)},Ce=()=>e.id||`${a}-input`,Ue=()=>l.status,Je=()=>{const t=R("control",[c("inputAlign"),{error:we.value,custom:!!s.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(s.input)return u("div",{class:t,onClick:ke},[s.input()]);const _={id:Ce(),ref:o,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,onBlur:Oe,onFocus:Ne,onInput:ue,onClick:ke,onChange:Ve,onKeypress:Ke,onCompositionend:Ve,onCompositionstart:Wt};return e.type==="textarea"?u("textarea",_,null):u("input",ye(Kt(e.type),_),null)},Qe=()=>{const t=s["left-icon"];if(e.leftIcon||t)return u("div",{class:R("left-icon"),onClick:je},[t?t():u(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ge=()=>{const t=s["right-icon"];if(e.rightIcon||t)return u("div",{class:R("right-icon"),onClick:qe},[t?t():u(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ze=()=>{if(e.showWordLimit&&e.maxlength){const t=z(d());return u("div",{class:R("word-limit")},[u("span",{class:R("word-num")},[t]),ie("/"),e.maxlength])}},Xe=()=>{if(r&&r.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const _=s["error-message"],v=c("errorMessageAlign");return u("div",{class:R("error-message",v)},[_?_({message:t}):t])}},et=()=>{const t=c("labelWidth"),_=c("labelAlign"),v=c("colon")?":":"";if(s.label)return[s.label(),v];if(e.label)return u("label",{id:`${a}-label`,for:s.input?void 0:Ce(),onClick:w=>{se(w),U()},style:_==="top"&&t?{width:X(t)}:void 0},[e.label+v])},tt=()=>[u("div",{class:R("body")},[Je(),C.value&&u(K,{ref:i,name:e.clearIcon,class:R("clear")},null),Ge(),s.button&&u("div",{class:R("button")},[s.button()])]),Ze(),Xe()];return Ee({blur:m,focus:U,validate:b,formValue:p,resetValidation:k,getValidationStatus:Ue}),ft(gt,{customValue:f,resetValidation:k,validateWithTrigger:x}),be(()=>e.modelValue,()=>{S(d()),k(),x("onChange"),Q(W)}),ce(()=>{S(d(),e.formatTrigger),Q(W)}),Ae("touchstart",We,{target:N(()=>{var t;return(t=i.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),_=c("labelAlign"),v=Qe(),w=()=>{const I=et();return _==="top"?[v,I].filter(Boolean):I||[]};return u(Ot,{size:e.size,class:R({error:we.value,disabled:t,[`label-${_}`]:_}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ye.value,valueClass:R("value"),titleClass:[R("label",[_,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:v&&_!=="top"?()=>v:null,title:w,value:tt,extra:s.extra})}}});const Gt=ne(Qt),[Zt,fe]=ee("switch"),Xt={size:D,loading:Boolean,disabled:Boolean,modelValue:q,activeColor:String,inactiveColor:String,activeValue:{type:q,default:!0},inactiveValue:{type:q,default:!1}};var en=M({name:Zt,props:Xt,emits:["change","update:modelValue"],setup(e,{emit:n,slots:s}){const a=()=>e.modelValue===e.activeValue,l=()=>{if(!e.disabled&&!e.loading){const i=a()?e.inactiveValue:e.activeValue;n("update:modelValue",i),n("change",i)}},o=()=>{if(e.loading){const i=a()?e.activeColor:e.inactiveColor;return u(_t,{class:fe("loading"),color:i},null)}if(s.node)return s.node()};return mt(()=>e.modelValue),()=>{var i;const{size:f,loading:r,disabled:d,activeColor:c,inactiveColor:C}=e,p=a(),y={fontSize:X(f),backgroundColor:p?c:C};return u("div",{role:"switch",class:fe({on:p,loading:r,disabled:d}),style:y,tabindex:d?void 0:0,"aria-checked":p,onClick:l},[u("div",{class:fe("node")},[o()]),(i=s.background)==null?void 0:i.call(s)])}}});const tn=ne(en),[nn,ge]=ee("back-top"),an={right:D,bottom:D,zIndex:D,target:[String,Object],offset:Be(200),immediate:Boolean,teleport:{type:[String,Object],default:"body"}};var ln=M({name:nn,inheritAttrs:!1,props:an,emits:["click"],setup(e,{emit:n,slots:s,attrs:a}){let l=!1;const o=B(!1),i=B(),f=B(),r=N(()=>te(bt(e.zIndex),{right:X(e.right),bottom:X(e.bottom)})),d=y=>{var k;n("click",y),(k=f.value)==null||k.scrollTo({top:0,behavior:e.immediate?"auto":"smooth"})},c=()=>{o.value=f.value?Ct(f.value)>=+e.offset:!1},C=()=>{const{target:y}=e;if(typeof y=="string"){const k=document.querySelector(y);if(k)return k}else return y},p=()=>{xt&&Q(()=>{f.value=e.target?C():St(i.value),c()})};return Ae("scroll",yt(c,100),{target:f}),ce(p),pt(()=>{l&&(o.value=!0,l=!1)}),kt(()=>{o.value&&e.teleport&&(o.value=!1,l=!0)}),be(()=>e.target,p),()=>{const y=u("div",ye({ref:e.teleport?void 0:i,class:ge({active:o.value}),style:r.value,onClick:d},a),[s.default?s.default():u(K,{name:"back-top",class:ge("icon")},null)]);return e.teleport?[u("div",{ref:i,class:ge("placeholder")},null),u(wt,{to:e.teleport},{default:()=>[y]})]:y}}});const on=ne(ln),[sn,J,rn]=ee("search"),cn=te({},pe,{label:String,shape:j("square"),leftIcon:j("search"),clearable:Pe,actionText:String,background:String,showAction:Boolean});var un=M({name:sn,props:cn,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:s,attrs:a}){const l=ze(),o=B(),i=()=>{s.action||(n("update:modelValue",""),n("cancel"))},f=m=>{m.keyCode===13&&(se(m),n("search",e.modelValue))},r=()=>e.id||`${l}-input`,d=()=>{if(s.label||e.label)return u("label",{class:J("label"),for:r()},[s.label?s.label():e.label])},c=()=>{if(e.showAction){const m=e.actionText||rn("cancel");return u("div",{class:J("action"),role:"button",tabindex:0,onClick:i},[s.action?s.action():m])}},C=()=>{var m;return(m=o.value)==null?void 0:m.blur()},p=()=>{var m;return(m=o.value)==null?void 0:m.focus()},y=m=>n("blur",m),k=m=>n("focus",m),L=m=>n("clear",m),b=m=>n("clickInput",m),x=m=>n("clickLeftIcon",m),T=m=>n("clickRightIcon",m),S=Object.keys(pe),ue=()=>{const m=te({},a,$e(e,S),{id:r()}),U=W=>n("update:modelValue",W);return u(Gt,ye({ref:o,type:"search",class:J("field"),border:!1,onBlur:y,onFocus:k,onClear:L,onKeypress:f,onClickInput:b,onClickLeftIcon:x,onClickRightIcon:T,"onUpdate:modelValue":U},m),$e(s,["left-icon","right-icon"]))};return Ee({focus:p,blur:C}),()=>{var m;return u("div",{class:J({"show-action":e.showAction}),style:{background:e.background}},[(m=s.left)==null?void 0:m.call(s),u("div",{class:J("content",e.shape)},[d(),ue()]),c()])}}});const dn=ne(un),fn={class:"popup-top"},gn=["src"],Le="overflow-hidden",hn=M({__name:"FloatingPanel",props:{maxHeight:{default:98},firstHeight:{default:50},minHeight:{default:8},isNeedTwo:{type:Boolean,default:!0}},emits:["change","handleScroll"],setup(e,{expose:n,emit:s}){const a=e;let l=0,o=0;const i=B(a.minHeight),f=B(null),r=B(0),d=B(!1),c=s,C=N(()=>({height:i.value==a.maxHeight?"calc(100% - 94px)":i.value+"%",overflowY:i.value>50?"auto":"hidden",borderRadius:i.value==a.maxHeight?"0":"20px 20px 0px 0px"})),p=T=>{d.value=!0,l=T.touches[0].clientY},y=T=>{if(r.value!==0)return;d.value=!1;const S=T.changedTouches[0].clientY-l;Math.abs(S)<5||(a.isNeedTwo?S<0?o==0?(o=1,i.value=a.firstHeight):(o=2,i.value=a.maxHeight):o==2&&S>20&&S<200?(o=1,i.value=a.firstHeight):(o==2&&S>200||o==1&&S>5)&&(o=0,i.value=a.minHeight):i.value=S<0?a.maxHeight:a.minHeight,l=0,c("change",i.value))},k=()=>{i.value=a.minHeight,r.value=0,o=0,c("change",i.value)},L=()=>{var T,S;r.value=(T=f.value)!=null&&T.scrollTop&&((S=f.value)==null?void 0:S.scrollTop)>0?f.value.scrollTop:0,c("handleScroll",r.value)};ce(()=>{window.addEventListener("scroll",L,!0)});const b=()=>{document.body.classList.add(Le)},x=()=>{document.body.classList.remove(Le)};return be(d,T=>{T?b():x()}),n({hideDialog:k}),(T,S)=>($(),V("div",{ref_key:"popup",ref:f,class:"popup",style:It(h(C)),onTouchstart:p,onTouchend:y},[g("div",fn,[g("img",{src:h(F)(h(i)==a.maxHeight?"h5/icon-xh.png":"h5/icon-sh.png")},null,8,gn)]),S[0]||(S[0]=g("div",{class:"w-100% bg-[#ddd]",style:{height:"1px"}},null,-1)),$t(T.$slots,"default",{},void 0,!0)],36))}});const vn=ae(hn,[["__scopeId","data-v-06d5c172"]]);const mn=["src"],_n=M({__name:"search",props:{showResult:{type:Boolean,default:!1}},emits:["search","focus","clear"],setup(e,{emit:n}){const s=B(),a=n,l=()=>a("search",s.value),o=()=>{a("focus")},i=()=>{s.value=null,a("clear")};return(f,r)=>{const d=dn;return $(),V("div",null,[u(d,{class:"search",modelValue:h(s),"onUpdate:modelValue":[r[0]||(r[0]=c=>De(s)?s.value=c:null),l],placeholder:"请输入搜索关键词",onSearch:l,onFocus:o,onClear:i},{"left-icon":Z(()=>[g("img",{src:h(F)("h5/icon-search.png")},null,8,mn)]),"right-icon":Z(()=>[he(g("div",{class:"text",onClick:i},"取消",512),[[ve,f.showResult]])]),_:1},8,["modelValue"])])}}});const bn=ae(_n,[["__scopeId","data-v-5497c4c4"]]);const yn={class:"sht"},pn={class:"tool"},kn=["onClick"],wn=["src"],Cn={class:"location"},xn=["src"],Sn=["src"],$n=M({__name:"toolBar",setup(e){const n=B([{icon:"com/tool-vr.png",label:"全景",type:"vr"},{icon:"com/tool-2d.png",label:"2D",type:"setViewMode"}]),s=B(!0),a=l=>{switch(l){case"vr":re("h5/vr");break;case"init":Me(window.map,13,[116.307503,39.984104]);break;default:n.value[1].label=n.value[1].label==="2D"?"3D":"2D",window.map.setViewMode(n.value[1].label),n.value[1].label==="3D"&&window.map.setPitch(70);break}};return(l,o)=>{const i=tn;return $(),V(O,null,[g("div",yn,[u(i,{modelValue:h(s),"onUpdate:modelValue":o[0]||(o[0]=f=>De(s)?s.value=f:null),onClick:o[1]||(o[1]=f=>h(Vt)(h(s))),"active-color":"#029AA7","inactive-color":"#B2B2B2"},null,8,["modelValue"]),o[4]||(o[4]=g("span",{class:"mt-4px"},"手绘地图",-1))]),g("div",pn,[($(!0),V(O,null,G(h(n),f=>($(),V("div",{class:"list",key:f.icon},[g("div",{onClick:r=>a(f.type),class:"item"},[g("img",{src:h(F)(f.icon),"lazy-load":""},null,8,wn),ie(" "+A(f.label),1)],8,kn)]))),128))]),g("div",Cn,[g("img",{onClick:o[2]||(o[2]=me(f=>h(re)("h5/index"),["stop"])),src:h(F)("h5/home.png")},null,8,xn),g("img",{onClick:o[3]||(o[3]=me(f=>a("init"),["stop"])),src:h(F)("h5/position.png")},null,8,Sn)])],64)}}});const In=ae($n,[["__scopeId","data-v-ee996f18"]]),Vn={class:"left"},Ln={key:0,class:"status"},Tn=["src"],Pn=["src"],Bn={class:"right"},Rn={class:"title ellipsi1"},En={class:"tag"},An={key:0},Dn={key:1},Mn={class:"text"},zn={class:"text"},Hn=M({__name:"infoList",props:{info:{}},setup(e){const n=e,s=N(()=>{var i;const l=(i=n.info)==null?void 0:i.img,o=Lt(l);return o==="2"?_e(l[1][0]):o==="1"?_e(l[0]):F("h5/editSrc.png")}),a=()=>{const l=`${n.info.type}/${n.info.id}/${n.info.name}详情`;re("h5/detail",l)};return(l,o)=>{var i,f,r,d,c,C,p,y,k,L;return $(),V(O,null,[g("div",{class:"info-list",onClick:o[1]||(o[1]=b=>a())},[g("div",Vn,[(i=l.info)!=null&&i.status?($(),V("div",Ln,A((f=l.info)==null?void 0:f.status),1)):oe("",!0),g("img",{src:h(s),"lazy-load":""},null,8,Tn),(r=l.info)!=null&&r.link?($(),V("img",{key:1,onClick:o[0]||(o[0]=me(b=>h(re)("webView",l.info.link,!0),["stop"])),class:"vr",src:h(F)("h5/icon-vr.png")},null,8,Pn)):oe("",!0)]),g("div",Bn,[g("div",Rn,A((d=l.info)==null?void 0:d.name),1),g("div",En,[(c=l.info)!=null&&c.typeLabel?($(),V("span",An,A((C=l.info)==null?void 0:C.typeLabel),1)):oe("",!0),(p=l.info)!=null&&p.approval?($(),V("span",Dn,A((y=l.info)==null?void 0:y.approval),1)):oe("",!0)]),g("p",Mn,"用地面积："+A((k=l.info)==null?void 0:k.area)+"亩",1),g("p",zn,"基准地价："+A((L=l.info)==null?void 0:L.price)+"/㎡",1)])]),o[2]||(o[2]=g("div",{class:"line"},null,-1))],64)}}});const Te=ae(Hn,[["__scopeId","data-v-bee3f375"]]),Fn={class:"w-screen h-screen overflow-hidden"},Nn={class:"tab"},On=["onClick"],jn={class:"box"},qn={class:"list"},Wn=["src"],Yn={class:"search-result"},Kn={class:"type"},Un=["onClick"],Jn={class:"font-extrabold text-#353535 flex items-center flex-1"},Qn=["src"],Gn={class:"go-there"},Zn=["src"],Xn={class:"py-20px px-30px box-border"},ea=M({__name:"mainMap",setup(e){const n=Tt(),s={specialTrain:[{label:"工业用地",type:"parkPlot"}],all:[{label:"商业项目",type:"business"},{label:"文旅投资",type:"travel"},{label:"产业招商",type:"industry"},{label:"矿权出让",type:"mining"},{label:"其他招商",type:"other"}]},a=Re({show:!0,detailPop:!1,showFooter:!0,searchResult:!1,searchList:[],detailInfo:null,tabActive:0,tab:[],markerList:"",markerDetail:"",type:""}),l=Mt(async d=>{if(d){const c=Pt(window.searchList,d);a.searchList=c.reduce((C,p)=>{const y=C.find(k=>k.label===p.typeLabel);return y?y.list.push(p):C.push({label:p.typeLabel,list:[p]}),C},[])}else a.searchList=[]},500),o=d=>{d.position&&Me(window.map,17,d.position),a.showResult=!1,a.searchList=[]},i=d=>{a.tabActive=d,a.markerList=window.data.marker[d]},f=d=>{a.showFooter=!1,a.detailPop=!0,a.markerDetail=d},r=()=>{a.detailPop=!1,a.showFooter=!0};return ce(()=>{a.type=n.params.type,a.tab=s[a.type],i(a.tab[0].type)}),(d,c)=>{const C=Dt,p=on,y=vn,k=At,L=Bt;return $(),V("div",Fn,[u(bn,{"show-result":h(a).showResult,onSearch:h(l),onFocus:c[0]||(c[0]=b=>h(a).showResult=!0),onClear:c[1]||(c[1]=b=>h(a).showResult=!1)},null,8,["show-result","onSearch"]),g("div",Nn,[($(!0),V(O,null,G(h(a).tab,b=>($(),V("span",{class:Rt({active:h(a).tabActive===b.type}),onClick:x=>i(b.type),key:b.type},A(b.label),11,On))),128))]),u(In,{ref:"refToolBar"},null,512),u(C,{onMarkerHandel:f,marker:h(a).markerList,type:h(a).type},null,8,["marker","type"]),he(u(y,{class:"floating-panel","min-height":20,"max-height":90,"is-need-two":!1},{default:Z(()=>[g("div",jn,[g("div",qn,[($(!0),V(O,null,G(h(a).markerList,b=>($(),Et(Te,{key:b.id,info:b},null,8,["info"]))),128)),u(p,{target:".popup",right:"40px",bottom:"128px","z-index":"2002",style:{"background-color":"transparent"}},{default:Z(()=>[g("img",{class:"back-top",src:h(F)("h5/back-top.png")},null,8,Wn)]),_:1})])])]),_:1},512),[[ve,h(a).showFooter]]),he(g("div",Yn,[($(!0),V(O,null,G(h(a).searchList,b=>($(),V("div",{key:b.label,class:"result"},[g("div",Kn,A(b==null?void 0:b.label),1),c[3]||(c[3]=g("div",{class:"line",style:{width:"100%"}},null,-1)),($(!0),V(O,null,G(b==null?void 0:b.list,x=>($(),V("div",{class:"list",key:x.id},[g("div",{class:"flex justify-between",onClick:T=>o(x)},[g("div",Jn,[g("img",{src:h(_e)(x==null?void 0:x.icon)},null,8,Qn),ie(A(x==null?void 0:x.name),1)]),g("div",Gn,[g("img",{src:h(F)("h5/icon-dzq.png")},null,8,Zn),c[2]||(c[2]=ie("到这去 "))])],8,Un)]))),128))]))),128))],512),[[ve,h(a).showResult]]),u(L,{show:h(a).detailPop,closeable:"","close-icon":"close",round:"",position:"bottom",class:"detail-pop",onClickOverlay:r,onClickCloseIcon:r},{default:Z(()=>[g("div",Xn,[u(Te,{info:h(a).markerDetail},null,8,["info"]),u(k,{info:{...h(a).markerDetail,cla:"contact"}},null,8,["info"])])]),_:1},8,["show"])])}}});const oa=ae(ea,[["__scopeId","data-v-3b906b23"]]);export{oa as default};
