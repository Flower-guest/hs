import{d as Y,r as k,D as Z,o as P,s as ee,$ as te,k as b,c as h,h as n,u as t,b as J,w as F,q as O,n as U,j as G,t as E,F as L,i as K,l as $,m as se,z as ne,a as f,_ as oe}from"./index-54672c58.js";import{a as le,_ as ie}from"./ContactButton.vue_vue_type_script_setup_true_lang-45d7be59.js";import{c as ae,h as ce,m as z,w as de,b as Q,g as j,x as W,t as re}from"./index-f79d2a50.js";import{a as ue,I as pe,S as xe,d as me}from"./AppArouse-d68d8296.js";const[ve,X]=ae("text-ellipsis"),_e={rows:ce(1),dots:z("..."),content:z(""),expandText:z(""),collapseText:z(""),position:z("end")};var fe=Y({name:ve,props:_e,emits:["clickAction"],setup(l,{emit:R}){const N=k(""),v=k(!1),p=k(!1),o=k(),S=Z(()=>v.value?l.collapseText:l.expandText),C=y=>{if(!y)return 0;const T=y.match(/^\d*(\.\d*)?/);return T?Number(T[0]):0},a=()=>{const y=()=>{if(!o.value)return;const c=window.getComputedStyle(o.value),i=document.createElement("div");return Array.prototype.slice.apply(c).forEach(x=>{i.style.setProperty(x,c.getPropertyValue(x))}),i.style.position="fixed",i.style.zIndex="-9999",i.style.top="-9999px",i.style.height="auto",i.style.minHeight="auto",i.style.maxHeight="auto",i.innerText=l.content,document.body.appendChild(i),i},T=(c,i)=>{const{content:u,position:x,dots:g}=l,s=u.length,A=()=>{const d=(r,_)=>{if(_-r<=1)return x==="end"?u.slice(0,r)+g:g+u.slice(_,s);const m=Math.round((r+_)/2);return x==="end"?c.innerText=u.slice(0,m)+g+S.value:c.innerText=g+u.slice(m,s)+S.value,c.offsetHeight>i?x==="end"?d(r,m):d(m,_):x==="end"?d(m,_):d(r,m)};c.innerText=d(0,s)},V=(d,r)=>{if(d[1]-d[0]<=1&&r[1]-r[0]<=1)return u.slice(0,d[0])+g+u.slice(r[1],s);const _=Math.floor((d[0]+d[1])/2),m=Math.ceil((r[0]+r[1])/2);return c.innerText=l.content.slice(0,_)+l.dots+l.content.slice(m,s)+l.expandText,c.offsetHeight>=i?V([d[0],_],[m,r[1]]):V([_,d[1]],[r[0],m])},q=0+s>>1;return l.position==="middle"?c.innerText=V([0,q],[q,s]):A(),c.innerText},w=y();if(!w)return;const{paddingBottom:I,paddingTop:B,lineHeight:H}=w.style,D=Math.ceil((Number(l.rows)+.5)*C(H)+C(B)+C(I));D<w.offsetHeight?(p.value=!0,N.value=T(w,D)):(p.value=!1,N.value=l.content),document.body.removeChild(w)},e=y=>{v.value=!v.value,R("clickAction",y)},M=()=>b("span",{class:X("action"),onClick:e},[S.value]);return P(a),ee(()=>[l.content,l.rows,l.position],a),te("resize",a),()=>b("div",{ref:o,class:X()},[v.value?l.content:N.value,p.value?M():null])}});const ye=de(fe);const ge={class:"top"},be=["src"],we={key:0},he={class:"custom-indicator"},ke={class:"btn"},Ce={class:"main"},Te={class:"main-info"},Ae={class:"mb-19px flex items-start justify-between"},Ne={class:"flex flex-col flex-1"},Se={class:"text-36px mb-8px"},Me={key:0},De=["src"],Ee={class:"text-28px text-[#30F230] mb-12px"},ze={class:"text-40px"},He=["innerHTML"],Ie=Y({__name:"detail",setup(l){const N=ne().params,v=k(!1),p=k(),o=k(),S=async()=>{const a=await ue(N.id);a.body=a.body?a.body:"暂无描述",o.value=a,p.value=a!=null&&a.vrimage?0:1},C=Z(()=>{var a;return(a=o.value)!=null&&a.tag?JSON.parse(o.value.tag):[]});return S(),(a,e)=>{var H,D,c,i,u,x,g;const M=pe,y=me,T=xe,w=ye,I=le,B=ie;return f(),h(L,null,[n("div",null,[n("div",ge,[n("img",{onClick:e[0]||(e[0]=(...s)=>t(Q)&&t(Q)(...s)),class:"back w-56px h-56px",src:t(j)("webview_back.png")},null,8,be),t(p)==0&&((H=t(o))!=null&&H.vrimage)?(f(),h("div",we,[b(M,{class:"w-full h-400px",src:t(W)((D=t(o))==null?void 0:D.thumb),"lazy-load":""},null,8,["src"]),b(M,{class:"look_vr w-100px h-100px",onClick:e[1]||(e[1]=s=>t(re)("webView",t(o).vrimage,!0)),src:t(j)("icon-vr.png"),"lazy-load":""},null,8,["src"])])):(f(),J(T,{key:1,class:"h-400px"},{indicator:F(({active:s,total:A})=>[n("div",he,E(s+1)+"/"+E(A),1)]),default:F(()=>{var s;return[(f(!0),h(L,null,K((s=t(o))==null?void 0:s.pics,A=>(f(),J(y,{key:A},{default:F(()=>[b(M,{class:"w-full",height:"100%",fit:"cover",src:t(W)(A),"lazy-load":""},null,8,["src"])]),_:2},1024))),128))]}),_:1})),n("div",ke,[(c=t(o))!=null&&c.vrimage?(f(),h("span",{key:0,onClick:e[2]||(e[2]=O(()=>p.value=0,["stop"])),class:U([{"bg-#29ACCC rounded-22px":t(p)==0},"px-18px py-8px"])},"全景",2)):G("",!0),n("span",{onClick:e[3]||(e[3]=O(()=>p.value=1,["stop"])),class:U([{"bg-#29ACCC rounded-22px":t(p)==1},"px-18px py-8px"])},"图片",2)])]),n("div",Ce,[n("div",Te,[n("div",Ae,[n("div",Ne,[n("div",Se,E((i=t(o))==null?void 0:i.name),1),t(C).length>0?(f(),h("div",Me,[(f(!0),h(L,null,K(t(C),s=>(f(),h("span",{key:s,class:"text-22px text-[#029AA7] bg-[#DDF6F8] px-8px py-4px mr-8px"},E(s),1))),128))])):G("",!0)]),n("div",{class:"text-24px text-[#029AA7] flex justify-end items-center",onClick:e[4]||(e[4]=s=>v.value=!0)},[n("img",{class:"w-48px h-48px",src:t(j)("icon-share.png")},null,8,De),e[6]||(e[6]=$("点击分享 "))])]),e[9]||(e[9]=n("div",{class:"w-full h-1px bg-[#DDD] mb-12px"},null,-1)),n("div",Ee,[e[7]||(e[7]=$(" ￥")),n("span",ze,E((u=t(o))==null?void 0:u.price),1),e[8]||(e[8]=$("/晚 "))]),b(w,{class:"text-24px text-[#888]",content:(x=t(o))==null?void 0:x.lcposition},null,8,["content"])]),e[10]||(e[10]=n("div",{class:"w-full h-1px bg-[#DDD] mb-32px"},null,-1)),e[11]||(e[11]=n("div",{class:"flex items-center"},[n("div",{class:"bg-#29ACCC rounded-4 w-8px h-32px"}),n("span",{class:"text-32px font-medium ml-5px"},"简介描述")],-1)),n("div",{class:"mt-28px pb-150px",innerHTML:(g=t(o))==null?void 0:g.body},null,8,He),b(I,{info:{...t(o),cla:"w-100% z-1 bg-[#fff] fixed bottom-0 left-0 py-38px"}},null,8,["info"])])]),b(B,{"show-share":t(v),"onUpdate:showShare":e[5]||(e[5]=s=>se(v)?v.value=s:null)},null,8,["show-share"])],64)}}});const $e=oe(Ie,[["__scopeId","data-v-6463b16a"]]);export{$e as default};
